import{createComponent as b,mergeProps as T,ssr as st,ssrHydrationKey as it,escape as j,ssrAttribute as ae,Portal as lt,isServer as ct}from"solid-js/web";import{m as O,P as V,E as at,u as Y,F as ut,G as dt,H as ft,I as Z,J as gt,A as _,K as ht,L as Ke,c as De,M as pt,i as E,N as yt,O as mt,Q as vt,l as Fe,B as bt,w as Kt,o as R,R as St,x as wt,D as Mt,b as ue,n as Q,y as ke,z as xt,t as Pt,d as re,S as Ct,T as It,_ as Dt}from"./button-CwX4pdjk.js";import{createContext as z,splitProps as A,createSignal as F,createEffect as k,useContext as N,onCleanup as L,createComponent as Ft,createMemo as B,on as se,createComputed as kt,mergeProps as Tt,onMount as Ot,createUniqueId as q,Show as ee}from"solid-js";import{combineStyle as de}from"@solid-primitives/props";import{autoUpdate as At,offset as Et,flip as Rt,shift as Lt,size as Vt,hide as Bt,arrow as zt,computePosition as Ut,platform as $t}from"@floating-ui/dom";import{access as a}from"@solid-primitives/utils";import{createEventListener as Nt}from"@solid-primitives/event-listener";import{mergeRefs as Gt}from"@solid-primitives/refs";var _t=["<svg",' display="block" viewBox="','" style="transform:scale(1.02)"><g','><path fill="none"','></path><path stroke="none"',"></path></g></svg>"],fe=z();function ge(){const e=N(fe);if(e===void 0)throw new Error("[kobalte]: `usePopperContext` must be used within a `Popper` component");return e}var J=30,Se=J/2,Ht={top:180,right:-90,bottom:0,left:90},we="M23,27.8c1.1,1.2,3.4,2.2,5,2.2h2H0h2c1.7,0,3.9-1,5-2.2l6.6-7.2c0.7-0.8,2-0.8,2.7,0L23,27.8L23,27.8z";function Wt(e){const t=ge(),o=O({size:J},e),[n,r]=A(o,["ref","style","size"]),s=()=>t.currentPlacement().split("-")[0],d=Yt(t.contentRef),g=()=>d()?.getPropertyValue("background-color")||"none",i=()=>d()?.getPropertyValue(`border-${s()}-color`)||"none",p=()=>d()?.getPropertyValue(`border-${s()}-width`)||"0px",h=()=>Number.parseInt(p())*2*(J/n.size),K=()=>`rotate(${Ht[s()]} ${Se} ${Se}) translate(0 2)`;return b(V,T({as:"div","aria-hidden":"true",get style(){return de({position:"absolute","font-size":`${n.size}px`,width:"1em",height:"1em","pointer-events":"none",fill:g(),stroke:i(),"stroke-width":h()},n.style)}},r,{get children(){return st(_t,it(),`0 0 ${j(J,!0)} ${j(J,!0)}`,ae("transform",j(K(),!0),!1),ae("d",j(we,!0),!1),ae("d",j(we,!0),!1))}}))}function Yt(e){const[t,o]=F();return k(()=>{const n=e();n&&o(at(n).getComputedStyle(n))}),t}function Xt(e){ge();const[t,o]=A(e,["ref","style"]);return b(V,T({as:"div","data-popper-positioner":"",get style(){return de({position:"absolute",top:0,left:0,"min-width":"max-content"},t.style)}},o))}function Me(e){const{x:t=0,y:o=0,width:n=0,height:r=0}=e??{};if(typeof DOMRect=="function")return new DOMRect(t,o,n,r);const s={x:t,y:o,width:n,height:r,top:o,right:t+n,bottom:o+r,left:t};return{...s,toJSON:()=>s}}function qt(e,t){return{contextElement:e,getBoundingClientRect:()=>{const n=t(e);return n?Me(n):e?e.getBoundingClientRect():Me()}}}function jt(e){return/^(?:top|bottom|left|right)(?:-(?:start|end))?$/.test(e)}var Zt={top:"bottom",right:"left",bottom:"top",left:"right"};function Jt(e,t){const[o,n]=e.split("-"),r=Zt[o];return n?o==="left"||o==="right"?`${r} ${n==="start"?"top":"bottom"}`:n==="start"?`${r} ${t==="rtl"?"right":"left"}`:`${r} ${t==="rtl"?"left":"right"}`:`${r} center`}function Qt(e){const t=O({getAnchorRect:M=>M?.getBoundingClientRect(),placement:"bottom",gutter:0,shift:0,flip:!0,slide:!0,overlap:!1,sameWidth:!1,fitViewport:!1,hideWhenDetached:!1,detachedPadding:0,arrowPadding:4,overflowPadding:8},e),[o,n]=F(),[r,s]=F(),[d,g]=F(t.placement),i=()=>qt(t.anchorRef?.(),t.getAnchorRect),{direction:p}=Y();async function h(){const M=i(),S=o(),x=r();if(!M||!S)return;const I=(x?.clientHeight||0)/2,f=typeof t.gutter=="number"?t.gutter+I:t.gutter??I;S.style.setProperty("--kb-popper-content-overflow-padding",`${t.overflowPadding}px`),M.getBoundingClientRect();const u=[Et(({placement:D})=>{const C=!!D.split("-")[1];return{mainAxis:f,crossAxis:C?void 0:t.shift,alignmentAxis:t.shift}})];if(t.flip!==!1){const D=typeof t.flip=="string"?t.flip.split(" "):void 0;if(D!==void 0&&!D.every(jt))throw new Error("`flip` expects a spaced-delimited list of placements");u.push(Rt({padding:t.overflowPadding,fallbackPlacements:D}))}(t.slide||t.overlap)&&u.push(Lt({mainAxis:t.slide,crossAxis:t.overlap,padding:t.overflowPadding})),u.push(Vt({padding:t.overflowPadding,apply({availableWidth:D,availableHeight:C,rects:m}){const w=Math.round(m.reference.width);D=Math.floor(D),C=Math.floor(C),S.style.setProperty("--kb-popper-anchor-width",`${w}px`),S.style.setProperty("--kb-popper-content-available-width",`${D}px`),S.style.setProperty("--kb-popper-content-available-height",`${C}px`),t.sameWidth&&(S.style.width=`${w}px`),t.fitViewport&&(S.style.maxWidth=`${D}px`,S.style.maxHeight=`${C}px`)}})),t.hideWhenDetached&&u.push(Bt({padding:t.detachedPadding})),x&&u.push(zt({element:x,padding:t.arrowPadding}));const c=await Ut(M,S,{placement:t.placement,strategy:"absolute",middleware:u,platform:{...$t,isRTL:()=>p()==="rtl"}});if(g(c.placement),t.onCurrentPlacementChange?.(c.placement),!S)return;S.style.setProperty("--kb-popper-content-transform-origin",Jt(c.placement,p()));const l=Math.round(c.x),v=Math.round(c.y);let y;if(t.hideWhenDetached&&(y=c.middlewareData.hide?.referenceHidden?"hidden":"visible"),Object.assign(S.style,{top:"0",left:"0",transform:`translate3d(${l}px, ${v}px, 0)`,visibility:y}),x&&c.middlewareData.arrow){const{x:D,y:C}=c.middlewareData.arrow,m=c.placement.split("-")[0];Object.assign(x.style,{left:D!=null?`${D}px`:"",top:C!=null?`${C}px`:"",[m]:"100%"})}}k(()=>{const M=i(),S=o();if(!M||!S)return;const x=At(M,S,h,{elementResize:typeof ResizeObserver=="function"});L(x)}),k(()=>{const M=o(),S=t.contentRef?.();!M||!S||queueMicrotask(()=>{M.style.zIndex=getComputedStyle(S).zIndex})});const K={currentPlacement:d,contentRef:()=>t.contentRef?.(),setPositionerRef:n,setArrowRef:s};return b(fe.Provider,{value:K,get children(){return t.children}})}var Te=Object.assign(Qt,{Arrow:Wt,Context:fe,usePopperContext:ge,Positioner:Xt}),Oe=z();function Ae(){return N(Oe)}function en(){const e=Ae();if(e===void 0)throw new Error("[kobalte]: `useDomCollectionContext` must be used within a `DomCollectionProvider` component");return e}function Ee(e,t){return!!(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_PRECEDING)}function tn(e,t){const o=t.ref();if(!o)return-1;let n=e.length;if(!n)return-1;for(;n--;){const r=e[n]?.ref();if(r&&Ee(r,o))return n+1}return 0}function nn(e){const t=e.map((n,r)=>[r,n]);let o=!1;return t.sort(([n,r],[s,d])=>{const g=r.ref(),i=d.ref();return g===i||!g||!i?0:Ee(g,i)?(n>s&&(o=!0),-1):(n<s&&(o=!0),1)}),o?t.map(([n,r])=>r):e}function Re(e,t){const o=nn(e);e!==o&&t(o)}function on(e){const t=e[0],o=e[e.length-1]?.ref();let n=t?.ref()?.parentElement;for(;n;){if(o&&n.contains(o))return n;n=n.parentElement}return dt(n).body}function rn(e,t){k(()=>{const o=setTimeout(()=>{Re(e(),t)});L(()=>clearTimeout(o))})}function sn(e,t){if(typeof IntersectionObserver!="function"){rn(e,t);return}let o=[];k(()=>{const n=()=>{const d=!!o.length;o=e(),d&&Re(e(),t)},r=on(e()),s=new IntersectionObserver(n,{root:r});for(const d of e()){const g=d.ref();g&&s.observe(g)}L(()=>s.disconnect())})}function ln(e={}){const[t,o]=ut({value:()=>a(e.items),onChange:s=>e.onItemsChange?.(s)});sn(t,o);const n=s=>(o(d=>{const g=tn(d,s);return ft(d,s,g)}),()=>{o(d=>{const g=d.filter(i=>i.ref()!==s.ref());return d.length===g.length?d:g})});return{DomCollectionProvider:s=>Ft(Oe.Provider,{value:{registerItem:n},get children(){return s.children}})}}function cn(e){const t=en(),o=O({shouldRegisterItem:!0},e);k(()=>{if(!o.shouldRegisterItem)return;const n=t.registerItem(o.getItem());L(n)})}function Le(e){let t=e.startIndex??0;const o=e.startLevel??0,n=[],r=i=>{if(i==null)return"";const p=e.getKey??"key",h=Z(p)?i[p]:p(i);return h!=null?String(h):""},s=i=>{if(i==null)return"";const p=e.getTextValue??"textValue",h=Z(p)?i[p]:p(i);return h!=null?String(h):""},d=i=>{if(i==null)return!1;const p=e.getDisabled??"disabled";return(Z(p)?i[p]:p(i))??!1},g=i=>{if(i!=null)return Z(e.getSectionChildren)?i[e.getSectionChildren]:e.getSectionChildren?.(i)};for(const i of e.dataSource){if(Z(i)||gt(i)){n.push({type:"item",rawValue:i,key:String(i),textValue:String(i),disabled:d(i),level:o,index:t}),t++;continue}if(g(i)!=null){n.push({type:"section",rawValue:i,key:"",textValue:"",disabled:!1,level:o,index:t}),t++;const p=g(i)??[];if(p.length>0){const h=Le({dataSource:p,getKey:e.getKey,getTextValue:e.getTextValue,getDisabled:e.getDisabled,getSectionChildren:e.getSectionChildren,startIndex:t,startLevel:o+1});n.push(...h),t+=h.length}}else n.push({type:"item",rawValue:i,key:r(i),textValue:s(i),disabled:d(i),level:o,index:t}),t++}return n}function an(e,t=[]){return B(()=>{const o=Le({dataSource:a(e.dataSource),getKey:a(e.getKey),getTextValue:a(e.getTextValue),getDisabled:a(e.getDisabled),getSectionChildren:a(e.getSectionChildren)});for(let n=0;n<t.length;n++)t[n]();return e.factory(o)})}var $=class Ve extends Set{anchorKey;currentKey;constructor(t,o,n){super(t),t instanceof Ve?(this.anchorKey=o||t.anchorKey,this.currentKey=n||t.currentKey):(this.anchorKey=o,this.currentKey=n)}};function un(e){const[t,o]=De(e);return[()=>t()??new $,o]}function Be(e){return ht()?e.altKey:e.ctrlKey}function X(e){return pt()?e.metaKey:e.ctrlKey}function xe(e){return new $(e)}function dn(e,t){if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;return!0}function fn(e){const t=O({selectionMode:"none",selectionBehavior:"toggle"},e),[o,n]=F(!1),[r,s]=F(),d=B(()=>{const I=a(t.selectedKeys);return I!=null?xe(I):I}),g=B(()=>{const I=a(t.defaultSelectedKeys);return I!=null?xe(I):new $}),[i,p]=un({value:d,defaultValue:g,onChange:I=>t.onSelectionChange?.(I)}),[h,K]=F(a(t.selectionBehavior)),M=()=>a(t.selectionMode),S=()=>a(t.disallowEmptySelection)??!1,x=I=>{(a(t.allowDuplicateSelectionEvents)||!dn(I,i()))&&p(I)};return k(()=>{const I=i();a(t.selectionBehavior)==="replace"&&h()==="toggle"&&typeof I=="object"&&I.size===0&&K("replace")}),k(()=>{K(a(t.selectionBehavior)??"toggle")}),{selectionMode:M,disallowEmptySelection:S,selectionBehavior:h,setSelectionBehavior:K,isFocused:o,setFocused:n,focusedKey:r,setFocusedKey:s,selectedKeys:i,setSelectedKeys:x}}function gn(e){const[t,o]=F(""),[n,r]=F(-1);return{typeSelectHandlers:{onKeyDown:d=>{if(a(e.isDisabled))return;const g=a(e.keyboardDelegate),i=a(e.selectionManager);if(!g.getKeyForSearch)return;const p=hn(d.key);if(!p||d.ctrlKey||d.metaKey)return;p===" "&&t().trim().length>0&&(d.preventDefault(),d.stopPropagation());let h=o(M=>M+p),K=g.getKeyForSearch(h,i.focusedKey())??g.getKeyForSearch(h);K==null&&pn(h)&&(h=h[0],K=g.getKeyForSearch(h,i.focusedKey())??g.getKeyForSearch(h)),K!=null&&(i.setFocusedKey(K),e.onTypeSelect?.(K)),clearTimeout(n()),r(window.setTimeout(()=>o(""),500))}}}}function hn(e){return e.length===1||!/^[A-Z]/i.test(e)?e:""}function pn(e){return e.split("").every(t=>t===e[0])}function yn(e,t,o){const r=Tt({selectOnFocus:()=>a(e.selectionManager).selectionBehavior()==="replace"},e),s=()=>t(),{direction:d}=Y();let g={top:0,left:0};Nt(()=>a(r.isVirtualized)?void 0:s(),"scroll",()=>{const f=s();f&&(g={top:f.scrollTop,left:f.scrollLeft})});const{typeSelectHandlers:i}=gn({isDisabled:()=>a(r.disallowTypeAhead),keyboardDelegate:()=>a(r.keyboardDelegate),selectionManager:()=>a(r.selectionManager)}),p=()=>a(r.orientation)??"vertical",h=f=>{E(f,i.onKeyDown),f.altKey&&f.key==="Tab"&&f.preventDefault();const u=t();if(!u?.contains(f.target))return;const c=a(r.selectionManager),l=a(r.selectOnFocus),v=m=>{m!=null&&(c.setFocusedKey(m),f.shiftKey&&c.selectionMode()==="multiple"?c.extendSelection(m):l&&!Be(f)&&c.replaceSelection(m))},y=a(r.keyboardDelegate),D=a(r.shouldFocusWrap),C=c.focusedKey();switch(f.key){case(p()==="vertical"?"ArrowDown":"ArrowRight"):{if(y.getKeyBelow){f.preventDefault();let m;C!=null?m=y.getKeyBelow(C):m=y.getFirstKey?.(),m==null&&D&&(m=y.getFirstKey?.(C)),v(m)}break}case(p()==="vertical"?"ArrowUp":"ArrowLeft"):{if(y.getKeyAbove){f.preventDefault();let m;C!=null?m=y.getKeyAbove(C):m=y.getLastKey?.(),m==null&&D&&(m=y.getLastKey?.(C)),v(m)}break}case(p()==="vertical"?"ArrowLeft":"ArrowUp"):{if(y.getKeyLeftOf){f.preventDefault();const m=d()==="rtl";let w;C!=null?w=y.getKeyLeftOf(C):w=m?y.getFirstKey?.():y.getLastKey?.(),v(w)}break}case(p()==="vertical"?"ArrowRight":"ArrowDown"):{if(y.getKeyRightOf){f.preventDefault();const m=d()==="rtl";let w;C!=null?w=y.getKeyRightOf(C):w=m?y.getLastKey?.():y.getFirstKey?.(),v(w)}break}case"Home":if(y.getFirstKey){f.preventDefault();const m=y.getFirstKey(C,X(f));m!=null&&(c.setFocusedKey(m),X(f)&&f.shiftKey&&c.selectionMode()==="multiple"?c.extendSelection(m):l&&c.replaceSelection(m))}break;case"End":if(y.getLastKey){f.preventDefault();const m=y.getLastKey(C,X(f));m!=null&&(c.setFocusedKey(m),X(f)&&f.shiftKey&&c.selectionMode()==="multiple"?c.extendSelection(m):l&&c.replaceSelection(m))}break;case"PageDown":if(y.getKeyPageBelow&&C!=null){f.preventDefault();const m=y.getKeyPageBelow(C);v(m)}break;case"PageUp":if(y.getKeyPageAbove&&C!=null){f.preventDefault();const m=y.getKeyPageAbove(C);v(m)}break;case"a":X(f)&&c.selectionMode()==="multiple"&&a(r.disallowSelectAll)!==!0&&(f.preventDefault(),c.selectAll());break;case"Escape":f.defaultPrevented||(f.preventDefault(),a(r.disallowEmptySelection)||c.clearSelection());break;case"Tab":if(!a(r.allowsTabNavigation)){if(f.shiftKey)u.focus();else{const m=yt(u,{tabbable:!0});let w,W;do W=m.lastChild(),W&&(w=W);while(W);w&&!w.contains(document.activeElement)&&_(w)}break}}},K=f=>{const u=a(r.selectionManager),c=a(r.keyboardDelegate),l=a(r.selectOnFocus);if(u.isFocused()){f.currentTarget.contains(f.target)||u.setFocused(!1);return}if(f.currentTarget.contains(f.target)){if(u.setFocused(!0),u.focusedKey()==null){const v=D=>{D!=null&&(u.setFocusedKey(D),l&&u.replaceSelection(D))},y=f.relatedTarget;y&&f.currentTarget.compareDocumentPosition(y)&Node.DOCUMENT_POSITION_FOLLOWING?v(u.lastSelectedKey()??c.getLastKey?.()):v(u.firstSelectedKey()??c.getFirstKey?.())}else if(!a(r.isVirtualized)){const v=s();if(v){v.scrollTop=g.top,v.scrollLeft=g.left;const y=v.querySelector(`[data-key="${u.focusedKey()}"]`);y&&(_(y),Ke(v,y))}}}},M=f=>{const u=a(r.selectionManager);f.currentTarget.contains(f.relatedTarget)||u.setFocused(!1)},S=f=>{s()===f.target&&f.preventDefault()},x=()=>{const f=a(r.autoFocus);if(!f)return;const u=a(r.selectionManager),c=a(r.keyboardDelegate);let l;f==="first"&&(l=c.getFirstKey?.()),f==="last"&&(l=c.getLastKey?.());const v=u.selectedKeys();v.size&&(l=v.values().next().value),u.setFocused(!0),u.setFocusedKey(l);const y=t();y&&l==null&&!a(r.shouldUseVirtualFocus)&&_(y)};return Ot(()=>{r.deferAutoFocus?setTimeout(x,0):x()}),k(se([s,()=>a(r.isVirtualized),()=>a(r.selectionManager).focusedKey()],f=>{const[u,c,l]=f;if(c)l&&r.scrollToKey?.(l);else if(l&&u){const v=u.querySelector(`[data-key="${l}"]`);v&&Ke(u,v)}})),{tabIndex:B(()=>{if(!a(r.shouldUseVirtualFocus))return a(r.selectionManager).focusedKey()==null?0:-1}),onKeyDown:h,onMouseDown:S,onFocusIn:K,onFocusOut:M}}function ze(e,t){const o=()=>a(e.selectionManager),n=()=>a(e.key),r=()=>a(e.shouldUseVirtualFocus),s=c=>{o().selectionMode()!=="none"&&(o().selectionMode()==="single"?o().isSelected(n())&&!o().disallowEmptySelection()?o().toggleSelection(n()):o().replaceSelection(n()):c?.shiftKey?o().extendSelection(n()):o().selectionBehavior()==="toggle"||X(c)||"pointerType"in c&&c.pointerType==="touch"?o().toggleSelection(n()):o().replaceSelection(n()))},d=()=>o().isSelected(n()),g=()=>a(e.disabled)||o().isDisabled(n()),i=()=>!g()&&o().canSelectItem(n());let p=null;const h=c=>{i()&&(p=c.pointerType,c.pointerType==="mouse"&&c.button===0&&!a(e.shouldSelectOnPressUp)&&s(c))},K=c=>{i()&&c.pointerType==="mouse"&&c.button===0&&a(e.shouldSelectOnPressUp)&&a(e.allowsDifferentPressOrigin)&&s(c)},M=c=>{i()&&(a(e.shouldSelectOnPressUp)&&!a(e.allowsDifferentPressOrigin)||p!=="mouse")&&s(c)},S=c=>{!i()||!["Enter"," "].includes(c.key)||(Be(c)?o().toggleSelection(n()):s(c))},x=c=>{g()&&c.preventDefault()},I=c=>{const l=t();r()||g()||!l||c.target===l&&o().setFocusedKey(n())},f=B(()=>{if(!(r()||g()))return n()===o().focusedKey()?0:-1}),u=B(()=>a(e.virtualized)?void 0:n());return k(se([t,n,r,()=>o().focusedKey(),()=>o().isFocused()],([c,l,v,y,D])=>{c&&l===y&&D&&!v&&document.activeElement!==c&&(e.focus?e.focus():_(c))})),{isSelected:d,isDisabled:g,allowsSelection:i,tabIndex:f,dataKey:u,onPointerDown:h,onPointerUp:K,onClick:M,onKeyDown:S,onMouseDown:x,onFocus:I}}var mn=class{collection;state;constructor(e,t){this.collection=e,this.state=t}selectionMode(){return this.state.selectionMode()}disallowEmptySelection(){return this.state.disallowEmptySelection()}selectionBehavior(){return this.state.selectionBehavior()}setSelectionBehavior(e){this.state.setSelectionBehavior(e)}isFocused(){return this.state.isFocused()}setFocused(e){this.state.setFocused(e)}focusedKey(){return this.state.focusedKey()}setFocusedKey(e){(e==null||this.collection().getItem(e))&&this.state.setFocusedKey(e)}selectedKeys(){return this.state.selectedKeys()}isSelected(e){if(this.state.selectionMode()==="none")return!1;const t=this.getKey(e);return t==null?!1:this.state.selectedKeys().has(t)}isEmpty(){return this.state.selectedKeys().size===0}isSelectAll(){if(this.isEmpty())return!1;const e=this.state.selectedKeys();return this.getAllSelectableKeys().every(t=>e.has(t))}firstSelectedKey(){let e;for(const t of this.state.selectedKeys()){const o=this.collection().getItem(t),n=o?.index!=null&&e?.index!=null&&o.index<e.index;(!e||n)&&(e=o)}return e?.key}lastSelectedKey(){let e;for(const t of this.state.selectedKeys()){const o=this.collection().getItem(t),n=o?.index!=null&&e?.index!=null&&o.index>e.index;(!e||n)&&(e=o)}return e?.key}extendSelection(e){if(this.selectionMode()==="none")return;if(this.selectionMode()==="single"){this.replaceSelection(e);return}const t=this.getKey(e);if(t==null)return;const o=this.state.selectedKeys(),n=o.anchorKey||t,r=new $(o,n,t);for(const s of this.getKeyRange(n,o.currentKey||t))r.delete(s);for(const s of this.getKeyRange(t,n))this.canSelectItem(s)&&r.add(s);this.state.setSelectedKeys(r)}getKeyRange(e,t){const o=this.collection().getItem(e),n=this.collection().getItem(t);return o&&n?o.index!=null&&n.index!=null&&o.index<=n.index?this.getKeyRangeInternal(e,t):this.getKeyRangeInternal(t,e):[]}getKeyRangeInternal(e,t){const o=[];let n=e;for(;n!=null;){const r=this.collection().getItem(n);if(r&&r.type==="item"&&o.push(n),n===t)return o;n=this.collection().getKeyAfter(n)}return[]}getKey(e){const t=this.collection().getItem(e);return t?!t||t.type!=="item"?null:t.key:e}toggleSelection(e){if(this.selectionMode()==="none")return;if(this.selectionMode()==="single"&&!this.isSelected(e)){this.replaceSelection(e);return}const t=this.getKey(e);if(t==null)return;const o=new $(this.state.selectedKeys());o.has(t)?o.delete(t):this.canSelectItem(t)&&(o.add(t),o.anchorKey=t,o.currentKey=t),!(this.disallowEmptySelection()&&o.size===0)&&this.state.setSelectedKeys(o)}replaceSelection(e){if(this.selectionMode()==="none")return;const t=this.getKey(e);if(t==null)return;const o=this.canSelectItem(t)?new $([t],t,t):new $;this.state.setSelectedKeys(o)}setSelectedKeys(e){if(this.selectionMode()==="none")return;const t=new $;for(const o of e){const n=this.getKey(o);if(n!=null&&(t.add(n),this.selectionMode()==="single"))break}this.state.setSelectedKeys(t)}selectAll(){this.selectionMode()==="multiple"&&this.state.setSelectedKeys(new Set(this.getAllSelectableKeys()))}clearSelection(){const e=this.state.selectedKeys();!this.disallowEmptySelection()&&e.size>0&&this.state.setSelectedKeys(new $)}toggleSelectAll(){this.isSelectAll()?this.clearSelection():this.selectAll()}select(e,t){this.selectionMode()!=="none"&&(this.selectionMode()==="single"?this.isSelected(e)&&!this.disallowEmptySelection()?this.toggleSelection(e):this.replaceSelection(e):this.selectionBehavior()==="toggle"||t&&t.pointerType==="touch"?this.toggleSelection(e):this.replaceSelection(e))}isSelectionEqual(e){if(e===this.state.selectedKeys())return!0;const t=this.selectedKeys();if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;for(const o of t)if(!e.has(o))return!1;return!0}canSelectItem(e){if(this.state.selectionMode()==="none")return!1;const t=this.collection().getItem(e);return t!=null&&!t.disabled}isDisabled(e){const t=this.collection().getItem(e);return!t||t.disabled}getAllSelectableKeys(){const e=[];return(o=>{for(;o!=null;){if(this.canSelectItem(o)){const n=this.collection().getItem(o);if(!n)continue;n.type==="item"&&e.push(o)}o=this.collection().getKeyAfter(o)}})(this.collection().getFirstKey()),e}},Pe=class{keyMap=new Map;iterable;firstKey;lastKey;constructor(e){this.iterable=e;for(const n of e)this.keyMap.set(n.key,n);if(this.keyMap.size===0)return;let t,o=0;for(const[n,r]of this.keyMap)t?(t.nextKey=n,r.prevKey=t.key):(this.firstKey=n,r.prevKey=void 0),r.type==="item"&&(r.index=o++),t=r,t.nextKey=void 0;this.lastKey=t.key}*[Symbol.iterator](){yield*this.iterable}getSize(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}getKeyBefore(e){return this.keyMap.get(e)?.prevKey}getKeyAfter(e){return this.keyMap.get(e)?.nextKey}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(e){return this.keyMap.get(e)}at(e){const t=[...this.getKeys()];return this.getItem(t[e])}};function vn(e){const t=fn(e),n=an({dataSource:()=>a(e.dataSource),getKey:()=>a(e.getKey),getTextValue:()=>a(e.getTextValue),getDisabled:()=>a(e.getDisabled),getSectionChildren:()=>a(e.getSectionChildren),factory:s=>e.filter?new Pe(e.filter(s)):new Pe(s)},[()=>e.filter]),r=new mn(n,t);return kt(()=>{const s=t.focusedKey();s!=null&&!n().getItem(s)&&t.setFocusedKey(void 0)}),{collection:n,selectionManager:()=>r}}var bn=class{collection;ref;collator;constructor(e,t,o){this.collection=e,this.ref=t,this.collator=o}getKeyBelow(e){let t=this.collection().getKeyAfter(e);for(;t!=null;){const o=this.collection().getItem(t);if(o&&o.type==="item"&&!o.disabled)return t;t=this.collection().getKeyAfter(t)}}getKeyAbove(e){let t=this.collection().getKeyBefore(e);for(;t!=null;){const o=this.collection().getItem(t);if(o&&o.type==="item"&&!o.disabled)return t;t=this.collection().getKeyBefore(t)}}getFirstKey(){let e=this.collection().getFirstKey();for(;e!=null;){const t=this.collection().getItem(e);if(t&&t.type==="item"&&!t.disabled)return e;e=this.collection().getKeyAfter(e)}}getLastKey(){let e=this.collection().getLastKey();for(;e!=null;){const t=this.collection().getItem(e);if(t&&t.type==="item"&&!t.disabled)return e;e=this.collection().getKeyBefore(e)}}getItem(e){return this.ref?.()?.querySelector(`[data-key="${e}"]`)??null}getKeyPageAbove(e){const t=this.ref?.();let o=this.getItem(e);if(!t||!o)return;const n=Math.max(0,o.offsetTop+o.offsetHeight-t.offsetHeight);let r=e;for(;r&&o&&o.offsetTop>n;)r=this.getKeyAbove(r),o=r!=null?this.getItem(r):null;return r}getKeyPageBelow(e){const t=this.ref?.();let o=this.getItem(e);if(!t||!o)return;const n=Math.min(t.scrollHeight,o.offsetTop-o.offsetHeight+t.offsetHeight);let r=e;for(;r&&o&&o.offsetTop<n;)r=this.getKeyBelow(r),o=r!=null?this.getItem(r):null;return r}getKeyForSearch(e,t){const o=this.collator?.();if(!o)return;let n=t!=null?this.getKeyBelow(t):this.getFirstKey();for(;n!=null;){const r=this.collection().getItem(n);if(r){const s=r.textValue.slice(0,e.length);if(r.textValue&&o.compare(s,e)===0)return n}n=this.getKeyBelow(n)}}};function Kn(e,t,o){const n=mt({usage:"search",sensitivity:"base"}),r=B(()=>{const s=a(e.keyboardDelegate);return s||new bn(e.collection,t,n)});return yn({selectionManager:()=>a(e.selectionManager),keyboardDelegate:r,autoFocus:()=>a(e.autoFocus),deferAutoFocus:()=>a(e.deferAutoFocus),shouldFocusWrap:()=>a(e.shouldFocusWrap),disallowEmptySelection:()=>a(e.disallowEmptySelection),selectOnFocus:()=>a(e.selectOnFocus),disallowTypeAhead:()=>a(e.disallowTypeAhead),shouldUseVirtualFocus:()=>a(e.shouldUseVirtualFocus),allowsTabNavigation:()=>a(e.allowsTabNavigation),isVirtualized:()=>a(e.isVirtualized),scrollToKey:s=>a(e.scrollToKey)?.(s),orientation:()=>a(e.orientation)},t)}function Sn(e={}){const[t,o]=vt({value:()=>a(e.isSelected),defaultValue:()=>!!a(e.defaultIsSelected),onChange:s=>e.onSelectedChange?.(s)});return{isSelected:t,setIsSelected:s=>{!a(e.isReadOnly)&&!a(e.isDisabled)&&o(s)},toggle:()=>{!a(e.isReadOnly)&&!a(e.isDisabled)&&o(!t())}}}var Ue=z();function $e(){return N(Ue)}function H(){const e=$e();if(e===void 0)throw new Error("[kobalte]: `useMenuContext` must be used within a `Menu` component");return e}var Ne=z();function he(){const e=N(Ne);if(e===void 0)throw new Error("[kobalte]: `useMenuItemContext` must be used within a `Menu.Item` component");return e}var Ge=z();function G(){const e=N(Ge);if(e===void 0)throw new Error("[kobalte]: `useMenuRootContext` must be used within a `MenuRoot` component");return e}function pe(e){let t;const o=G(),n=H(),r=O({id:o.generateId(`item-${q()}`)},e),[s,d]=A(r,["ref","textValue","disabled","closeOnSelect","checked","indeterminate","onSelect","onPointerMove","onPointerLeave","onPointerDown","onPointerUp","onClick","onKeyDown","onMouseDown","onFocus"]),[g,i]=F(),[p,h]=F(),[K,M]=F(),S=()=>n.listState().selectionManager(),x=()=>d.id,I=()=>S().focusedKey()===x(),f=()=>{s.onSelect?.(),s.closeOnSelect&&setTimeout(()=>{n.close(!0)})};cn({getItem:()=>({ref:()=>t,type:"item",key:x(),textValue:s.textValue??K()?.textContent??t?.textContent??"",disabled:s.disabled??!1})});const u=ze({key:x,selectionManager:S,shouldSelectOnPressUp:!0,allowsDifferentPressOrigin:!0,disabled:()=>s.disabled},()=>t),c=w=>{E(w,s.onPointerMove),w.pointerType==="mouse"&&(s.disabled?n.onItemLeave(w):(n.onItemEnter(w),w.defaultPrevented||(_(w.currentTarget),n.listState().selectionManager().setFocused(!0),n.listState().selectionManager().setFocusedKey(x()))))},l=w=>{E(w,s.onPointerLeave),w.pointerType==="mouse"&&n.onItemLeave(w)},v=w=>{E(w,s.onPointerUp),!s.disabled&&w.button===0&&f()},y=w=>{if(E(w,s.onKeyDown),!w.repeat&&!s.disabled)switch(w.key){case"Enter":case" ":f();break}},D=B(()=>{if(s.indeterminate)return"mixed";if(s.checked!=null)return s.checked}),C=B(()=>({"data-indeterminate":s.indeterminate?"":void 0,"data-checked":s.checked&&!s.indeterminate?"":void 0,"data-disabled":s.disabled?"":void 0,"data-highlighted":I()?"":void 0})),m={isChecked:()=>s.checked,dataset:C,setLabelRef:M,generateId:ue(()=>d.id),registerLabel:Q(i),registerDescription:Q(h)};return b(Ne.Provider,{value:m,get children(){return b(V,T({as:"div",get tabIndex(){return u.tabIndex()},get"aria-checked"(){return D()},get"aria-disabled"(){return s.disabled},get"aria-labelledby"(){return g()},get"aria-describedby"(){return p()},get"data-key"(){return u.dataKey()},get onPointerDown(){return R([s.onPointerDown,u.onPointerDown])},get onPointerUp(){return R([v,u.onPointerUp])},get onClick(){return R([s.onClick,u.onClick])},get onKeyDown(){return R([y,u.onKeyDown])},get onMouseDown(){return R([s.onMouseDown,u.onMouseDown])},get onFocus(){return R([s.onFocus,u.onFocus])},onPointerMove:c,onPointerLeave:l},C,d))}})}function _n(e){const t=O({closeOnSelect:!1},e),[o,n]=A(t,["checked","defaultChecked","onChange","onSelect"]),r=Sn({isSelected:()=>o.checked,defaultIsSelected:()=>o.defaultChecked,onSelectedChange:d=>o.onChange?.(d),isDisabled:()=>n.disabled});return b(pe,T({role:"menuitemcheckbox",get checked(){return r.isSelected()},onSelect:()=>{o.onSelect?.(),r.toggle()}},n))}var wn=z();function ne(){return N(wn)}function Hn(){const e=ne();if(e===void 0)throw new Error("[kobalte]: `useMenubarContext` must be used within a `Menubar` component");return e}var te={next:(e,t)=>e==="ltr"?t==="horizontal"?"ArrowRight":"ArrowDown":t==="horizontal"?"ArrowLeft":"ArrowUp",previous:(e,t)=>te.next(e==="ltr"?"rtl":"ltr",t)},Ce={first:e=>e==="horizontal"?"ArrowDown":"ArrowRight",last:e=>e==="horizontal"?"ArrowUp":"ArrowLeft"};function Wn(e){const t=G(),o=H(),n=ne(),{direction:r}=Y(),s=O({id:t.generateId("trigger")},e),[d,g]=A(s,["ref","id","disabled","onPointerDown","onClick","onKeyDown","onMouseOver","onFocus"]);let i=()=>t.value();n!==void 0&&(i=()=>t.value()??d.id,n.lastValue()===void 0&&n.setLastValue(i));const p=Fe(()=>o.triggerRef(),()=>"button"),h=B(()=>p()==="a"&&o.triggerRef()?.getAttribute("href")!=null);k(se(()=>n?.value(),u=>{h()&&u===i()&&o.triggerRef()?.focus()}));const K=()=>{n!==void 0?o.isOpen()?n.value()===i()&&n.closeMenu():(n.autoFocusMenu()||n.setAutoFocusMenu(!0),o.open(!1)):o.toggle(!0)},M=u=>{E(u,d.onPointerDown),u.currentTarget.dataset.pointerType=u.pointerType,!d.disabled&&u.pointerType!=="touch"&&u.button===0&&K()},S=u=>{E(u,d.onClick),d.disabled||u.currentTarget.dataset.pointerType==="touch"&&K()},x=u=>{if(E(u,d.onKeyDown),!d.disabled){if(h())switch(u.key){case"Enter":case" ":return}switch(u.key){case"Enter":case" ":case Ce.first(t.orientation()):u.stopPropagation(),u.preventDefault(),St(u.currentTarget),o.open("first"),n?.setAutoFocusMenu(!0),n?.setValue(i);break;case Ce.last(t.orientation()):u.stopPropagation(),u.preventDefault(),o.open("last");break;case te.next(r(),t.orientation()):if(n===void 0)break;u.stopPropagation(),u.preventDefault(),n.nextMenu();break;case te.previous(r(),t.orientation()):if(n===void 0)break;u.stopPropagation(),u.preventDefault(),n.previousMenu();break}}},I=u=>{E(u,d.onMouseOver),o.triggerRef()?.dataset.pointerType!=="touch"&&!d.disabled&&n!==void 0&&n.value()!==void 0&&n.setValue(i)},f=u=>{E(u,d.onFocus),n!==void 0&&u.currentTarget.dataset.pointerType!=="touch"&&n.setValue(i)};return k(()=>L(o.registerTriggerId(d.id))),b(bt,T({get"data-kb-menu-value-trigger"(){return t.value()},get id(){return d.id},get disabled(){return d.disabled},"aria-haspopup":"true",get"aria-expanded"(){return o.isOpen()},get"aria-controls"(){return o.isOpen()?o.contentId():void 0},get"data-highlighted"(){return i()!==void 0&&n?.value()===i()?!0:void 0},get tabIndex(){return n!==void 0?n.value()===i()||n.lastValue()===i()?0:-1:void 0},onPointerDown:M,onMouseOver:I,onClick:S,onKeyDown:x,onFocus:f,role:n!==void 0?"menuitem":void 0},()=>o.dataset(),g))}var Mn=z();function _e(){return N(Mn)}function He(e){let t;const o=G(),n=H(),r=ne(),s=_e(),{direction:d}=Y(),g=O({id:o.generateId(`content-${q()}`)},e),[i,p]=A(g,["ref","id","style","onOpenAutoFocus","onCloseAutoFocus","onEscapeKeyDown","onFocusOutside","onPointerEnter","onPointerMove","onKeyDown","onMouseDown","onFocusIn","onFocusOut"]);let h=0;const K=()=>n.parentMenuContext()==null&&r===void 0&&o.isModal(),M=Kn({selectionManager:n.listState().selectionManager,collection:n.listState().collection,autoFocus:n.autoFocus,deferAutoFocus:!0,shouldFocusWrap:!0,disallowTypeAhead:()=>!n.listState().selectionManager().isFocused(),orientation:()=>o.orientation()==="horizontal"?"vertical":"horizontal"},()=>t);wt({trapFocus:()=>K()&&n.isOpen(),onMountAutoFocus:l=>{r===void 0&&i.onOpenAutoFocus?.(l)},onUnmountAutoFocus:i.onCloseAutoFocus},()=>t);const S=l=>{if(re(l.currentTarget,l.target)&&(l.key==="Tab"&&n.isOpen()&&l.preventDefault(),r!==void 0&&l.currentTarget.getAttribute("aria-haspopup")!=="true"))switch(l.key){case te.next(d(),o.orientation()):l.stopPropagation(),l.preventDefault(),n.close(!0),r.setAutoFocusMenu(!0),r.nextMenu();break;case te.previous(d(),o.orientation()):if(l.currentTarget.hasAttribute("data-closed"))break;l.stopPropagation(),l.preventDefault(),n.close(!0),r.setAutoFocusMenu(!0),r.previousMenu();break}},x=l=>{i.onEscapeKeyDown?.(l),r?.setAutoFocusMenu(!1),n.close(!0)},I=l=>{i.onFocusOutside?.(l),o.isModal()&&l.preventDefault()},f=l=>{E(l,i.onPointerEnter),n.isOpen()&&(n.parentMenuContext()?.listState().selectionManager().setFocused(!1),n.parentMenuContext()?.listState().selectionManager().setFocusedKey(void 0))},u=l=>{if(E(l,i.onPointerMove),l.pointerType!=="mouse")return;const v=l.target,y=h!==l.clientX;re(l.currentTarget,v)&&y&&(n.setPointerDir(l.clientX>h?"right":"left"),h=l.clientX)};k(()=>L(n.registerContentId(i.id))),L(()=>n.setContentRef(void 0));const c={ref:Gt(l=>{n.setContentRef(l),t=l},i.ref),role:"menu",get id(){return i.id},get tabIndex(){return M.tabIndex()},get"aria-labelledby"(){return n.triggerId()},onKeyDown:R([i.onKeyDown,M.onKeyDown,S]),onMouseDown:R([i.onMouseDown,M.onMouseDown]),onFocusIn:R([i.onFocusIn,M.onFocusIn]),onFocusOut:R([i.onFocusOut,M.onFocusOut]),onPointerEnter:f,onPointerMove:u,get"data-orientation"(){return o.orientation()}};return b(ee,{get when(){return n.contentPresent()},get children(){return b(ee,{get when(){return s===void 0||n.parentMenuContext()!=null},get fallback(){return b(V,T({as:"div"},()=>n.dataset(),c,p))},get children(){return b(Te.Positioner,{get children(){return b(Mt,T({get disableOutsidePointerEvents(){return K()&&n.isOpen()},get excludedElements(){return[n.triggerRef]},bypassTopMostLayerCheck:!0,get style(){return de({"--kb-menu-content-transform-origin":"var(--kb-popper-content-transform-origin)",position:"relative"},i.style)},onEscapeKeyDown:x,onFocusOutside:I,get onDismiss(){return n.close}},()=>n.dataset(),c,p))}})}})}})}function Yn(e){const t=G(),o=H(),[n,r]=A(e,["ref"]);return Kt({element:()=>null,enabled:()=>o.contentPresent()&&t.preventScroll()}),b(He,r)}var We=z();function xn(){const e=N(We);if(e===void 0)throw new Error("[kobalte]: `useMenuGroupContext` must be used within a `Menu.Group` component");return e}function Pn(e){const t=G(),o=O({id:t.generateId(`group-${q()}`)},e),[n,r]=F(),s={generateId:ue(()=>o.id),registerLabelId:Q(r)};return b(We.Provider,{value:s,get children(){return b(V,T({as:"div",role:"group",get"aria-labelledby"(){return n()}},o))}})}function Xn(e){const t=xn(),o=O({id:t.generateId("label")},e),[n,r]=A(o,["id"]);return k(()=>L(t.registerLabelId(n.id))),b(V,T({as:"span",get id(){return n.id},"aria-hidden":"true"},r))}function qn(e){const t=H(),o=O({children:"▼"},e);return b(V,T({as:"span","aria-hidden":"true"},()=>t.dataset(),o))}function jn(e){return b(pe,T({role:"menuitem",closeOnSelect:!0},e))}function Zn(e){const t=he(),o=O({id:t.generateId("description")},e),[n,r]=A(o,["id"]);return k(()=>L(t.registerDescription(n.id))),b(V,T({as:"div",get id(){return n.id}},()=>t.dataset(),r))}function Jn(e){const t=he(),o=O({id:t.generateId("indicator")},e),[n,r]=A(o,["forceMount"]);return b(ee,{get when(){return n.forceMount||t.isChecked()},get children(){return b(V,T({as:"div"},()=>t.dataset(),r))}})}function Qn(e){const t=he(),o=O({id:t.generateId("label")},e),[n,r]=A(o,["ref","id"]);return k(()=>L(t.registerLabel(n.id))),b(V,T({as:"div",get id(){return n.id}},()=>t.dataset(),r))}function eo(e){const t=H();return b(ee,{get when(){return t.contentPresent()},get children(){return b(lt,e)}})}var Ye=z();function Cn(){const e=N(Ye);if(e===void 0)throw new Error("[kobalte]: `useMenuRadioGroupContext` must be used within a `Menu.RadioGroup` component");return e}function to(e){const o=G().generateId(`radiogroup-${q()}`),n=O({id:o},e),[r,s]=A(n,["value","defaultValue","onChange","disabled"]),[d,g]=De({value:()=>r.value,defaultValue:()=>r.defaultValue,onChange:p=>r.onChange?.(p)}),i={isDisabled:()=>r.disabled,isSelectedValue:p=>p===d(),setSelectedValue:g};return b(Ye.Provider,{value:i,get children(){return b(Pn,s)}})}function no(e){const t=Cn(),o=O({closeOnSelect:!1},e),[n,r]=A(o,["value","onSelect"]);return b(pe,T({role:"menuitemradio",get checked(){return t.isSelectedValue(n.value)},onSelect:()=>{n.onSelect?.(),t.setSelectedValue(n.value)}},r))}function In(e,t,o){const n=e.split("-")[0],r=o.getBoundingClientRect(),s=[],d=t.clientX,g=t.clientY;switch(n){case"top":s.push([d,g+5]),s.push([r.left,r.bottom]),s.push([r.left,r.top]),s.push([r.right,r.top]),s.push([r.right,r.bottom]);break;case"right":s.push([d-5,g]),s.push([r.left,r.top]),s.push([r.right,r.top]),s.push([r.right,r.bottom]),s.push([r.left,r.bottom]);break;case"bottom":s.push([d,g-5]),s.push([r.right,r.top]),s.push([r.right,r.bottom]),s.push([r.left,r.bottom]),s.push([r.left,r.top]);break;case"left":s.push([d+5,g]),s.push([r.right,r.bottom]),s.push([r.left,r.bottom]),s.push([r.left,r.top]),s.push([r.right,r.top]);break}return s}function Dn(e,t){return t?It([e.clientX,e.clientY],t):!1}function Xe(e){const t=G(),o=Ae(),n=$e(),r=ne(),s=_e(),d=O({placement:t.orientation()==="horizontal"?"bottom-start":"right-start"},e),[g,i]=A(d,["open","defaultOpen","onOpenChange"]);let p=0,h=null,K="right";const[M,S]=F(),[x,I]=F(),[f,u]=F(),[c,l]=F(),[v,y]=F(!0),[D,C]=F(i.placement),[m,w]=F([]),[W,je]=F([]),{DomCollectionProvider:Ze}=ln({items:W,onItemsChange:je}),U=ke({open:()=>g.open,defaultOpen:()=>g.defaultOpen,onOpenChange:P=>g.onOpenChange?.(P)}),{present:Je}=xt({show:()=>t.forceMount()||U.isOpen(),element:()=>c()??null}),ie=vn({selectionMode:"none",dataSource:W}),ye=P=>{y(P),U.open()},me=(P=!1)=>{U.close(),P&&n&&n.close(!0)},Qe=P=>{y(P),U.toggle()},ve=()=>{const P=c();P&&(_(P),ie.selectionManager().setFocused(!0),ie.selectionManager().setFocusedKey(void 0))},be=()=>{s!=null?setTimeout(()=>ve()):ve()},et=P=>{w(ce=>[...ce,P]);const oe=n?.registerNestedMenu(P);return()=>{w(ce=>Ct(ce,P)),oe?.()}},le=P=>K===h?.side&&Dn(P,h?.area),tt=P=>{le(P)&&P.preventDefault()},nt=P=>{le(P)||be()},ot=P=>{le(P)&&P.preventDefault()};Pt({isDisabled:()=>!(n==null&&U.isOpen()&&t.isModal()),targets:()=>[c(),...m()].filter(Boolean)}),k(()=>{const P=c();if(!P||!n)return;const oe=n.registerNestedMenu(P);L(()=>{oe()})}),k(()=>{n===void 0&&r?.registerMenu(t.value(),[c(),...m()])}),k(()=>{n!==void 0||r===void 0||(r.value()===t.value()?(f()?.focus(),r.autoFocusMenu()&&ye(!0)):me())}),k(()=>{n!==void 0||r===void 0||U.isOpen()&&r.setValue(t.value())}),L(()=>{n===void 0&&r?.unregisterMenu(t.value())});const rt={dataset:B(()=>({"data-expanded":U.isOpen()?"":void 0,"data-closed":U.isOpen()?void 0:""})),isOpen:U.isOpen,contentPresent:Je,nestedMenus:m,currentPlacement:D,pointerGraceTimeoutId:()=>p,autoFocus:v,listState:()=>ie,parentMenuContext:()=>n,triggerRef:f,contentRef:c,triggerId:M,contentId:x,setTriggerRef:u,setContentRef:l,open:ye,close:me,toggle:Qe,focusContent:be,onItemEnter:tt,onItemLeave:nt,onTriggerLeave:ot,setPointerDir:P=>K=P,setPointerGraceTimeoutId:P=>p=P,setPointerGraceIntent:P=>h=P,registerNestedMenu:et,registerItemToParentDomCollection:o?.registerItem,registerTriggerId:Q(S),registerContentId:Q(I)};return b(Ze,{get children(){return b(Ue.Provider,{value:rt,get children(){return b(ee,{when:s===void 0,get fallback(){return i.children},get children(){return b(Te,T({anchorRef:f,contentRef:c,onCurrentPlacementChange:C},i))}})}})}})}function oo(e){const{direction:t}=Y();return b(Xe,T({get placement(){return t()==="rtl"?"left-start":"right-start"},flip:!0},e))}var Fn={close:(e,t)=>e==="ltr"?[t==="horizontal"?"ArrowLeft":"ArrowUp"]:[t==="horizontal"?"ArrowRight":"ArrowDown"]};function ro(e){const t=H(),o=G(),[n,r]=A(e,["onFocusOutside","onKeyDown"]),{direction:s}=Y();return b(He,T({onOpenAutoFocus:h=>{h.preventDefault()},onCloseAutoFocus:h=>{h.preventDefault()},onFocusOutside:h=>{n.onFocusOutside?.(h);const K=h.target;re(t.triggerRef(),K)||t.close()},onKeyDown:h=>{E(h,n.onKeyDown);const K=re(h.currentTarget,h.target),M=Fn.close(s(),o.orientation()).includes(h.key),S=t.parentMenuContext()!=null;K&&M&&S&&(t.close(),_(t.triggerRef()))}},r))}var Ie=["Enter"," "],kn={open:(e,t)=>e==="ltr"?[...Ie,t==="horizontal"?"ArrowRight":"ArrowDown"]:[...Ie,t==="horizontal"?"ArrowLeft":"ArrowUp"]};function so(e){let t;const o=G(),n=H(),r=O({id:o.generateId(`sub-trigger-${q()}`)},e),[s,d]=A(r,["ref","id","textValue","disabled","onPointerMove","onPointerLeave","onPointerDown","onPointerUp","onClick","onKeyDown","onMouseDown","onFocus"]);let g=null;const i=()=>{ct||(g&&window.clearTimeout(g),g=null)},{direction:p}=Y(),h=()=>s.id,K=()=>{const l=n.parentMenuContext();if(l==null)throw new Error("[kobalte]: `Menu.SubTrigger` must be used within a `Menu.Sub` component");return l.listState().selectionManager()},M=()=>n.listState().collection(),S=()=>K().focusedKey()===h(),x=ze({key:h,selectionManager:K,shouldSelectOnPressUp:!0,allowsDifferentPressOrigin:!0,disabled:()=>s.disabled},()=>t),I=l=>{E(l,s.onClick),!n.isOpen()&&!s.disabled&&n.open(!0)},f=l=>{if(E(l,s.onPointerMove),l.pointerType!=="mouse")return;const v=n.parentMenuContext();if(v?.onItemEnter(l),!l.defaultPrevented){if(s.disabled){v?.onItemLeave(l);return}!n.isOpen()&&!g&&(n.parentMenuContext()?.setPointerGraceIntent(null),g=window.setTimeout(()=>{n.open(!1),i()},100)),v?.onItemEnter(l),l.defaultPrevented||(n.listState().selectionManager().isFocused()&&(n.listState().selectionManager().setFocused(!1),n.listState().selectionManager().setFocusedKey(void 0)),_(l.currentTarget),v?.listState().selectionManager().setFocused(!0),v?.listState().selectionManager().setFocusedKey(h()))}},u=l=>{if(E(l,s.onPointerLeave),l.pointerType!=="mouse")return;i();const v=n.parentMenuContext(),y=n.contentRef();if(y){v?.setPointerGraceIntent({area:In(n.currentPlacement(),l,y),side:n.currentPlacement().split("-")[0]}),window.clearTimeout(v?.pointerGraceTimeoutId());const D=window.setTimeout(()=>{v?.setPointerGraceIntent(null)},300);v?.setPointerGraceTimeoutId(D)}else{if(v?.onTriggerLeave(l),l.defaultPrevented)return;v?.setPointerGraceIntent(null)}v?.onItemLeave(l)},c=l=>{E(l,s.onKeyDown),!l.repeat&&(s.disabled||kn.open(p(),o.orientation()).includes(l.key)&&(l.stopPropagation(),l.preventDefault(),K().setFocused(!1),K().setFocusedKey(void 0),n.isOpen()||n.open("first"),n.focusContent(),n.listState().selectionManager().setFocused(!0),n.listState().selectionManager().setFocusedKey(M().getFirstKey())))};return k(()=>{if(n.registerItemToParentDomCollection==null)throw new Error("[kobalte]: `Menu.SubTrigger` must be used within a `Menu.Sub` component");const l=n.registerItemToParentDomCollection({ref:()=>t,type:"item",key:h(),textValue:s.textValue??t?.textContent??"",disabled:s.disabled??!1});L(l)}),k(se(()=>n.parentMenuContext()?.pointerGraceTimeoutId(),l=>{L(()=>{window.clearTimeout(l),n.parentMenuContext()?.setPointerGraceIntent(null)})})),k(()=>L(n.registerTriggerId(s.id))),L(()=>{i()}),b(V,T({as:"div",get id(){return s.id},role:"menuitem",get tabIndex(){return x.tabIndex()},"aria-haspopup":"true",get"aria-expanded"(){return n.isOpen()},get"aria-controls"(){return n.isOpen()?n.contentId():void 0},get"aria-disabled"(){return s.disabled},get"data-key"(){return x.dataKey()},get"data-highlighted"(){return S()?"":void 0},get"data-disabled"(){return s.disabled?"":void 0},get onPointerDown(){return R([s.onPointerDown,x.onPointerDown])},get onPointerUp(){return R([s.onPointerUp,x.onPointerUp])},get onClick(){return R([I,x.onClick])},get onKeyDown(){return R([c,x.onKeyDown])},get onMouseDown(){return R([s.onMouseDown,x.onMouseDown])},get onFocus(){return R([s.onFocus,x.onFocus])},onPointerMove:f,onPointerLeave:u},()=>n.dataset(),d))}function io(e){const t=ne(),o=`menu-${q()}`,n=O({id:o,modal:!0},e),[r,s]=A(n,["id","modal","preventScroll","forceMount","open","defaultOpen","onOpenChange","value","orientation"]),d=ke({open:()=>r.open,defaultOpen:()=>r.defaultOpen,onOpenChange:i=>r.onOpenChange?.(i)}),g={isModal:()=>r.modal??!0,preventScroll:()=>r.preventScroll??g.isModal(),forceMount:()=>r.forceMount??!1,generateId:ue(()=>r.id),value:()=>r.value,orientation:()=>r.orientation??t?.orientation()??"horizontal"};return b(Ge.Provider,{value:g,get children(){return b(Xe,T({get open(){return d.isOpen()},get onOpenChange(){return d.setIsOpen}},s))}})}var Tn={};Dt(Tn,{Root:()=>qe,Separator:()=>On});function qe(e){let t;const o=O({orientation:"horizontal"},e),[n,r]=A(o,["ref","orientation"]),s=Fe(()=>t,()=>"hr");return b(V,T({as:"hr",get role(){return s()!=="hr"?"separator":void 0},get"aria-orientation"(){return n.orientation==="vertical"?"vertical":void 0},get"data-orientation"(){return n.orientation}},r))}var On=qe;const An=z({});function lo(e){const[t,o]=F(!1);return b(An.Provider,{value:{isSorted:t,setIsSorted:o},get children(){return e.children}})}const En=z({});function co(e){const[t,o]=F(!1);return b(En.Provider,{value:{isSorting:t,setIsSorting:o},get children(){return e.children}})}export{co as I,io as M,Wt as P,qe as S,wn as a,$e as b,Wn as c,_n as d,Yn as e,Pn as f,Xn as g,qn as h,jn as i,Zn as j,Jn as k,Qn as l,eo as m,to as n,no as o,oo as p,ro as q,so as r,lo as s,En as t,Hn as u,G as v,H as w,An as x};
