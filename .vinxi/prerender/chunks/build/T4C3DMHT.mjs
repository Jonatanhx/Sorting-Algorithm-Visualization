import { createComponent, mergeProps, ssr, ssrHydrationKey, escape, ssrAttribute, Portal, isServer } from 'file://D:/Code/Examen-projekt/Sorting-Algorithm-Visualization/node_modules/solid-js/web/dist/server.js';
import { createContext, createSignal, splitProps, createEffect, createMemo, on as on$1, onCleanup, createUniqueId, Show, useContext, createComponent as createComponent$1, createComputed, mergeProps as mergeProps$1, onMount } from 'file://D:/Code/Examen-projekt/Sorting-Algorithm-Visualization/node_modules/solid-js/dist/server.js';
import { v as vt, I as Ie$1, f as dn$1, a as Dt, g as gt, k as ke, O as On$1, R as Re$1, x, t as tt, P, r as re, b as bt, h as It, i as bn$1, T as Tn$1, A as An$1, u as un$1, L as Ln, c as Pn$1, d as xn$1, N as Nn, S as Sn$1, j as wn$1, o as oe, l as cn$1, n as mt, q as T, J as Je, s as ln$1, z as vn$1, B as hn$1 } from './index22.mjs';
import { combineStyle } from 'file://D:/Code/Examen-projekt/Sorting-Algorithm-Visualization/node_modules/@solid-primitives/props/dist/index.js';
import { autoUpdate, offset, flip, shift, size, hide, arrow, computePosition, platform } from 'file://D:/Code/Examen-projekt/Sorting-Algorithm-Visualization/node_modules/@floating-ui/dom/dist/floating-ui.dom.mjs';
import { access } from 'file://D:/Code/Examen-projekt/Sorting-Algorithm-Visualization/node_modules/@solid-primitives/utils/dist/index/index.js';
import { createEventListener } from 'file://D:/Code/Examen-projekt/Sorting-Algorithm-Visualization/node_modules/@solid-primitives/event-listener/dist/index.js';
import { mergeRefs } from 'file://D:/Code/Examen-projekt/Sorting-Algorithm-Visualization/node_modules/@solid-primitives/refs/dist/index.js';

const _t=createContext({});function _n(e){const[t,o]=createSignal(!1);return createComponent(_t.Provider,{value:{isSorted:t,setIsSorted:o},get children(){return e.children}})}const Ht=createContext({});function Hn(e){const[t,o]=createSignal(!1);return createComponent(Ht.Provider,{value:{isSorting:t,setIsSorting:o},get children(){return e.children}})}var Wt=["<svg",' display="block" viewBox="','" style="transform:scale(1.02)"><g','><path fill="none"','></path><path stroke="none"',"></path></g></svg>"],fe=createContext();function ge(){const e=useContext(fe);if(e===void 0)throw new Error("[kobalte]: `usePopperContext` must be used within a `Popper` component");return e}var J=30,we=J/2,Yt={top:180,right:-90,bottom:0,left:90},Se="M23,27.8c1.1,1.2,3.4,2.2,5,2.2h2H0h2c1.7,0,3.9-1,5-2.2l6.6-7.2c0.7-0.8,2-0.8,2.7,0L23,27.8L23,27.8z";function Xt(e){const t=ge(),o=vt({size:J},e),[n,r]=splitProps(o,["ref","style","size"]),s=()=>t.currentPlacement().split("-")[0],d=qt(t.contentRef),g=()=>d()?.getPropertyValue("background-color")||"none",i=()=>d()?.getPropertyValue(`border-${s()}-color`)||"none",p=()=>d()?.getPropertyValue(`border-${s()}-width`)||"0px",h=()=>Number.parseInt(p())*2*(J/n.size),K=()=>`rotate(${Yt[s()]} ${we} ${we}) translate(0 2)`;return createComponent(Ie$1,mergeProps({as:"div","aria-hidden":"true",get style(){return combineStyle({position:"absolute","font-size":`${n.size}px`,width:"1em",height:"1em","pointer-events":"none",fill:g(),stroke:i(),"stroke-width":h()},n.style)}},r,{get children(){return ssr(Wt,ssrHydrationKey(),`0 0 ${escape(J,!0)} ${escape(J,!0)}`,ssrAttribute("transform",escape(K(),!0),!1),ssrAttribute("d",escape(Se,!0),!1),ssrAttribute("d",escape(Se,!0),!1))}}))}function qt(e){const[t,o]=createSignal();return createEffect(()=>{const n=e();n&&o(dn$1(n).getComputedStyle(n));}),t}function jt(e){ge();const[t,o]=splitProps(e,["ref","style"]);return createComponent(Ie$1,mergeProps({as:"div","data-popper-positioner":"",get style(){return combineStyle({position:"absolute",top:0,left:0,"min-width":"max-content"},t.style)}},o))}function Me(e){const{x:t=0,y:o=0,width:n=0,height:r=0}=e??{};if(typeof DOMRect=="function")return new DOMRect(t,o,n,r);const s={x:t,y:o,width:n,height:r,top:o,right:t+n,bottom:o+r,left:t};return {...s,toJSON:()=>s}}function Zt(e,t){return {contextElement:e,getBoundingClientRect:()=>{const n=t(e);return n?Me(n):e?e.getBoundingClientRect():Me()}}}function Jt(e){return /^(?:top|bottom|left|right)(?:-(?:start|end))?$/.test(e)}var Qt={top:"bottom",right:"left",bottom:"top",left:"right"};function en(e,t){const[o,n]=e.split("-"),r=Qt[o];return n?o==="left"||o==="right"?`${r} ${n==="start"?"top":"bottom"}`:n==="start"?`${r} ${t==="rtl"?"right":"left"}`:`${r} ${t==="rtl"?"left":"right"}`:`${r} center`}function tn(e){const t=vt({getAnchorRect:M=>M?.getBoundingClientRect(),placement:"bottom",gutter:0,shift:0,flip:!0,slide:!0,overlap:!1,sameWidth:!1,fitViewport:!1,hideWhenDetached:!1,detachedPadding:0,arrowPadding:4,overflowPadding:8},e),[o,n]=createSignal(),[r,s]=createSignal(),[d,g]=createSignal(t.placement),i=()=>Zt(t.anchorRef?.(),t.getAnchorRect),{direction:p}=Dt();async function h(){const M=i(),w=o(),x=r();if(!M||!w)return;const I=(x?.clientHeight||0)/2,f=typeof t.gutter=="number"?t.gutter+I:t.gutter??I;w.style.setProperty("--kb-popper-content-overflow-padding",`${t.overflowPadding}px`),M.getBoundingClientRect();const u=[offset(({placement:D})=>{const C=!!D.split("-")[1];return {mainAxis:f,crossAxis:C?void 0:t.shift,alignmentAxis:t.shift}})];if(t.flip!==!1){const D=typeof t.flip=="string"?t.flip.split(" "):void 0;if(D!==void 0&&!D.every(Jt))throw new Error("`flip` expects a spaced-delimited list of placements");u.push(flip({padding:t.overflowPadding,fallbackPlacements:D}));}(t.slide||t.overlap)&&u.push(shift({mainAxis:t.slide,crossAxis:t.overlap,padding:t.overflowPadding})),u.push(size({padding:t.overflowPadding,apply({availableWidth:D,availableHeight:C,rects:m}){const S=Math.round(m.reference.width);D=Math.floor(D),C=Math.floor(C),w.style.setProperty("--kb-popper-anchor-width",`${S}px`),w.style.setProperty("--kb-popper-content-available-width",`${D}px`),w.style.setProperty("--kb-popper-content-available-height",`${C}px`),t.sameWidth&&(w.style.width=`${S}px`),t.fitViewport&&(w.style.maxWidth=`${D}px`,w.style.maxHeight=`${C}px`);}})),t.hideWhenDetached&&u.push(hide({padding:t.detachedPadding})),x&&u.push(arrow({element:x,padding:t.arrowPadding}));const c=await computePosition(M,w,{placement:t.placement,strategy:"absolute",middleware:u,platform:{...platform,isRTL:()=>p()==="rtl"}});if(g(c.placement),t.onCurrentPlacementChange?.(c.placement),!w)return;w.style.setProperty("--kb-popper-content-transform-origin",en(c.placement,p()));const l=Math.round(c.x),v=Math.round(c.y);let y;if(t.hideWhenDetached&&(y=c.middlewareData.hide?.referenceHidden?"hidden":"visible"),Object.assign(w.style,{top:"0",left:"0",transform:`translate3d(${l}px, ${v}px, 0)`,visibility:y}),x&&c.middlewareData.arrow){const{x:D,y:C}=c.middlewareData.arrow,m=c.placement.split("-")[0];Object.assign(x.style,{left:D!=null?`${D}px`:"",top:C!=null?`${C}px`:"",[m]:"100%"});}}createEffect(()=>{const M=i(),w=o();if(!M||!w)return;const x=autoUpdate(M,w,h,{elementResize:typeof ResizeObserver=="function"});onCleanup(x);}),createEffect(()=>{const M=o(),w=t.contentRef?.();!M||!w||queueMicrotask(()=>{M.style.zIndex=getComputedStyle(w).zIndex;});});const K={currentPlacement:d,contentRef:()=>t.contentRef?.(),setPositionerRef:n,setArrowRef:s};return createComponent(fe.Provider,{value:K,get children(){return t.children}})}var Te=Object.assign(tn,{Arrow:Xt,Context:fe,usePopperContext:ge,Positioner:jt}),Oe=createContext();function Ae(){return useContext(Oe)}function nn(){const e=Ae();if(e===void 0)throw new Error("[kobalte]: `useDomCollectionContext` must be used within a `DomCollectionProvider` component");return e}function Ee(e,t){return !!(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_PRECEDING)}function on(e,t){const o=t.ref();if(!o)return -1;let n=e.length;if(!n)return -1;for(;n--;){const r=e[n]?.ref();if(r&&Ee(r,o))return n+1}return 0}function rn(e){const t=e.map((n,r)=>[r,n]);let o=!1;return t.sort(([n,r],[s,d])=>{const g=r.ref(),i=d.ref();return g===i||!g||!i?0:Ee(g,i)?(n>s&&(o=!0),-1):(n<s&&(o=!0),1)}),o?t.map(([n,r])=>r):e}function Re(e,t){const o=rn(e);e!==o&&t(o);}function sn(e){const t=e[0],o=e[e.length-1]?.ref();let n=t?.ref()?.parentElement;for(;n;){if(o&&n.contains(o))return n;n=n.parentElement;}return T(n).body}function ln(e,t){createEffect(()=>{const o=setTimeout(()=>{Re(e(),t);});onCleanup(()=>clearTimeout(o));});}function cn(e,t){if(typeof IntersectionObserver!="function"){ln(e,t);return}let o=[];createEffect(()=>{const n=()=>{const d=!!o.length;o=e(),d&&Re(e(),t);},r=sn(e()),s=new IntersectionObserver(n,{root:r});for(const d of e()){const g=d.ref();g&&s.observe(g);}onCleanup(()=>s.disconnect());});}function an(e={}){const[t,o]=Sn$1({value:()=>access(e.items),onChange:s=>e.onItemsChange?.(s)});cn(t,o);const n=s=>(o(d=>{const g=on(d,s);return cn$1(d,s,g)}),()=>{o(d=>{const g=d.filter(i=>i.ref()!==s.ref());return d.length===g.length?d:g});});return {DomCollectionProvider:s=>createComponent$1(Oe.Provider,{value:{registerItem:n},get children(){return s.children}})}}function un(e){const t=nn(),o=vt({shouldRegisterItem:!0},e);createEffect(()=>{if(!o.shouldRegisterItem)return;const n=t.registerItem(o.getItem());onCleanup(n);});}function Le(e){let t=e.startIndex??0;const o=e.startLevel??0,n=[],r=i=>{if(i==null)return "";const p=e.getKey??"key",h=Je(p)?i[p]:p(i);return h!=null?String(h):""},s=i=>{if(i==null)return "";const p=e.getTextValue??"textValue",h=Je(p)?i[p]:p(i);return h!=null?String(h):""},d=i=>{if(i==null)return !1;const p=e.getDisabled??"disabled";return (Je(p)?i[p]:p(i))??!1},g=i=>{if(i!=null)return Je(e.getSectionChildren)?i[e.getSectionChildren]:e.getSectionChildren?.(i)};for(const i of e.dataSource){if(Je(i)||ln$1(i)){n.push({type:"item",rawValue:i,key:String(i),textValue:String(i),disabled:d(i),level:o,index:t}),t++;continue}if(g(i)!=null){n.push({type:"section",rawValue:i,key:"",textValue:"",disabled:!1,level:o,index:t}),t++;const p=g(i)??[];if(p.length>0){const h=Le({dataSource:p,getKey:e.getKey,getTextValue:e.getTextValue,getDisabled:e.getDisabled,getSectionChildren:e.getSectionChildren,startIndex:t,startLevel:o+1});n.push(...h),t+=h.length;}}else n.push({type:"item",rawValue:i,key:r(i),textValue:s(i),disabled:d(i),level:o,index:t}),t++;}return n}function dn(e,t=[]){return createMemo(()=>{const o=Le({dataSource:access(e.dataSource),getKey:access(e.getKey),getTextValue:access(e.getTextValue),getDisabled:access(e.getDisabled),getSectionChildren:access(e.getSectionChildren)});for(let n=0;n<t.length;n++)t[n]();return e.factory(o)})}var $=class Ve extends Set{anchorKey;currentKey;constructor(t,o,n){super(t),t instanceof Ve?(this.anchorKey=o||t.anchorKey,this.currentKey=n||t.currentKey):(this.anchorKey=o,this.currentKey=n);}};function fn(e){const[t,o]=Re$1(e);return [()=>t()??new $,o]}function Be(e){return e.ctrlKey}function X(e){return e.ctrlKey}function xe(e){return new $(e)}function gn(e,t){if(e.size!==t.size)return !1;for(const o of e)if(!t.has(o))return !1;return !0}function hn(e){const t=vt({selectionMode:"none",selectionBehavior:"toggle"},e),[o,n]=createSignal(!1),[r,s]=createSignal(),d=createMemo(()=>{const I=access(t.selectedKeys);return I!=null?xe(I):I}),g=createMemo(()=>{const I=access(t.defaultSelectedKeys);return I!=null?xe(I):new $}),[i,p]=fn({value:d,defaultValue:g,onChange:I=>t.onSelectionChange?.(I)}),[h,K]=createSignal(access(t.selectionBehavior)),M=()=>access(t.selectionMode),w=()=>access(t.disallowEmptySelection)??!1,x=I=>{(access(t.allowDuplicateSelectionEvents)||!gn(I,i()))&&p(I);};return createEffect(()=>{const I=i();access(t.selectionBehavior)==="replace"&&h()==="toggle"&&typeof I=="object"&&I.size===0&&K("replace");}),createEffect(()=>{K(access(t.selectionBehavior)??"toggle");}),{selectionMode:M,disallowEmptySelection:w,selectionBehavior:h,setSelectionBehavior:K,isFocused:o,setFocused:n,focusedKey:r,setFocusedKey:s,selectedKeys:i,setSelectedKeys:x}}function pn(e){const[t,o]=createSignal(""),[n,r]=createSignal(-1);return {typeSelectHandlers:{onKeyDown:d=>{if(access(e.isDisabled))return;const g=access(e.keyboardDelegate),i=access(e.selectionManager);if(!g.getKeyForSearch)return;const p=yn(d.key);if(!p||d.ctrlKey||d.metaKey)return;p===" "&&t().trim().length>0&&(d.preventDefault(),d.stopPropagation());let h=o(M=>M+p),K=g.getKeyForSearch(h,i.focusedKey())??g.getKeyForSearch(h);K==null&&mn(h)&&(h=h[0],K=g.getKeyForSearch(h,i.focusedKey())??g.getKeyForSearch(h)),K!=null&&(i.setFocusedKey(K),e.onTypeSelect?.(K)),clearTimeout(n()),r(window.setTimeout(()=>o(""),500));}}}}function yn(e){return e.length===1||!/^[A-Z]/i.test(e)?e:""}function mn(e){return e.split("").every(t=>t===e[0])}function vn(e,t,o){const r=mergeProps$1({selectOnFocus:()=>access(e.selectionManager).selectionBehavior()==="replace"},e),s=()=>t(),{direction:d}=Dt();let g={top:0,left:0};createEventListener(()=>access(r.isVirtualized)?void 0:s(),"scroll",()=>{const f=s();f&&(g={top:f.scrollTop,left:f.scrollLeft});});const{typeSelectHandlers:i}=pn({isDisabled:()=>access(r.disallowTypeAhead),keyboardDelegate:()=>access(r.keyboardDelegate),selectionManager:()=>access(r.selectionManager)}),p=()=>access(r.orientation)??"vertical",h=f=>{tt(f,i.onKeyDown),f.altKey&&f.key==="Tab"&&f.preventDefault();const u=t();if(!u?.contains(f.target))return;const c=access(r.selectionManager),l=access(r.selectOnFocus),v=m=>{m!=null&&(c.setFocusedKey(m),f.shiftKey&&c.selectionMode()==="multiple"?c.extendSelection(m):l&&!Be(f)&&c.replaceSelection(m));},y=access(r.keyboardDelegate),D=access(r.shouldFocusWrap),C=c.focusedKey();switch(f.key){case(p()==="vertical"?"ArrowDown":"ArrowRight"):{if(y.getKeyBelow){f.preventDefault();let m;C!=null?m=y.getKeyBelow(C):m=y.getFirstKey?.(),m==null&&D&&(m=y.getFirstKey?.(C)),v(m);}break}case(p()==="vertical"?"ArrowUp":"ArrowLeft"):{if(y.getKeyAbove){f.preventDefault();let m;C!=null?m=y.getKeyAbove(C):m=y.getLastKey?.(),m==null&&D&&(m=y.getLastKey?.(C)),v(m);}break}case(p()==="vertical"?"ArrowLeft":"ArrowUp"):{if(y.getKeyLeftOf){f.preventDefault();const m=d()==="rtl";let S;C!=null?S=y.getKeyLeftOf(C):S=m?y.getFirstKey?.():y.getLastKey?.(),v(S);}break}case(p()==="vertical"?"ArrowRight":"ArrowDown"):{if(y.getKeyRightOf){f.preventDefault();const m=d()==="rtl";let S;C!=null?S=y.getKeyRightOf(C):S=m?y.getLastKey?.():y.getFirstKey?.(),v(S);}break}case"Home":if(y.getFirstKey){f.preventDefault();const m=y.getFirstKey(C,X(f));m!=null&&(c.setFocusedKey(m),X(f)&&f.shiftKey&&c.selectionMode()==="multiple"?c.extendSelection(m):l&&c.replaceSelection(m));}break;case"End":if(y.getLastKey){f.preventDefault();const m=y.getLastKey(C,X(f));m!=null&&(c.setFocusedKey(m),X(f)&&f.shiftKey&&c.selectionMode()==="multiple"?c.extendSelection(m):l&&c.replaceSelection(m));}break;case"PageDown":if(y.getKeyPageBelow&&C!=null){f.preventDefault();const m=y.getKeyPageBelow(C);v(m);}break;case"PageUp":if(y.getKeyPageAbove&&C!=null){f.preventDefault();const m=y.getKeyPageAbove(C);v(m);}break;case"a":X(f)&&c.selectionMode()==="multiple"&&access(r.disallowSelectAll)!==!0&&(f.preventDefault(),c.selectAll());break;case"Escape":f.defaultPrevented||(f.preventDefault(),access(r.disallowEmptySelection)||c.clearSelection());break;case"Tab":if(!access(r.allowsTabNavigation)){if(f.shiftKey)u.focus();else {const m=vn$1(u,{tabbable:!0});let S,W;do W=m.lastChild(),W&&(S=W);while(W);S&&!S.contains(document.activeElement)&&P(S);}break}}},K=f=>{const u=access(r.selectionManager),c=access(r.keyboardDelegate),l=access(r.selectOnFocus);if(u.isFocused()){f.currentTarget.contains(f.target)||u.setFocused(!1);return}if(f.currentTarget.contains(f.target)){if(u.setFocused(!0),u.focusedKey()==null){const v=D=>{D!=null&&(u.setFocusedKey(D),l&&u.replaceSelection(D));},y=f.relatedTarget;y&&f.currentTarget.compareDocumentPosition(y)&Node.DOCUMENT_POSITION_FOLLOWING?v(u.lastSelectedKey()??c.getLastKey?.()):v(u.firstSelectedKey()??c.getFirstKey?.());}else if(!access(r.isVirtualized)){const v=s();if(v){v.scrollTop=g.top,v.scrollLeft=g.left;const y=v.querySelector(`[data-key="${u.focusedKey()}"]`);y&&(P(y),mt(v,y));}}}},M=f=>{const u=access(r.selectionManager);f.currentTarget.contains(f.relatedTarget)||u.setFocused(!1);},w=f=>{s()===f.target&&f.preventDefault();},x=()=>{const f=access(r.autoFocus);if(!f)return;const u=access(r.selectionManager),c=access(r.keyboardDelegate);let l;f==="first"&&(l=c.getFirstKey?.()),f==="last"&&(l=c.getLastKey?.());const v=u.selectedKeys();v.size&&(l=v.values().next().value),u.setFocused(!0),u.setFocusedKey(l);const y=t();y&&l==null&&!access(r.shouldUseVirtualFocus)&&P(y);};return onMount(()=>{r.deferAutoFocus?setTimeout(x,0):x();}),createEffect(on$1([s,()=>access(r.isVirtualized),()=>access(r.selectionManager).focusedKey()],f=>{const[u,c,l]=f;if(c)l&&r.scrollToKey?.(l);else if(l&&u){const v=u.querySelector(`[data-key="${l}"]`);v&&mt(u,v);}})),{tabIndex:createMemo(()=>{if(!access(r.shouldUseVirtualFocus))return access(r.selectionManager).focusedKey()==null?0:-1}),onKeyDown:h,onMouseDown:w,onFocusIn:K,onFocusOut:M}}function ze(e,t){const o=()=>access(e.selectionManager),n=()=>access(e.key),r=()=>access(e.shouldUseVirtualFocus),s=c=>{o().selectionMode()!=="none"&&(o().selectionMode()==="single"?o().isSelected(n())&&!o().disallowEmptySelection()?o().toggleSelection(n()):o().replaceSelection(n()):c?.shiftKey?o().extendSelection(n()):o().selectionBehavior()==="toggle"||X(c)||"pointerType"in c&&c.pointerType==="touch"?o().toggleSelection(n()):o().replaceSelection(n()));},d=()=>o().isSelected(n()),g=()=>access(e.disabled)||o().isDisabled(n()),i=()=>!g()&&o().canSelectItem(n());let p=null;const h=c=>{i()&&(p=c.pointerType,c.pointerType==="mouse"&&c.button===0&&!access(e.shouldSelectOnPressUp)&&s(c));},K=c=>{i()&&c.pointerType==="mouse"&&c.button===0&&access(e.shouldSelectOnPressUp)&&access(e.allowsDifferentPressOrigin)&&s(c);},M=c=>{i()&&(access(e.shouldSelectOnPressUp)&&!access(e.allowsDifferentPressOrigin)||p!=="mouse")&&s(c);},w=c=>{!i()||!["Enter"," "].includes(c.key)||(Be(c)?o().toggleSelection(n()):s(c));},x=c=>{g()&&c.preventDefault();},I=c=>{const l=t();r()||g()||!l||c.target===l&&o().setFocusedKey(n());},f=createMemo(()=>{if(!(r()||g()))return n()===o().focusedKey()?0:-1}),u=createMemo(()=>access(e.virtualized)?void 0:n());return createEffect(on$1([t,n,r,()=>o().focusedKey(),()=>o().isFocused()],([c,l,v,y,D])=>{c&&l===y&&D&&!v&&document.activeElement!==c&&(e.focus?e.focus():P(c));})),{isSelected:d,isDisabled:g,allowsSelection:i,tabIndex:f,dataKey:u,onPointerDown:h,onPointerUp:K,onClick:M,onKeyDown:w,onMouseDown:x,onFocus:I}}var bn=class{collection;state;constructor(e,t){this.collection=e,this.state=t;}selectionMode(){return this.state.selectionMode()}disallowEmptySelection(){return this.state.disallowEmptySelection()}selectionBehavior(){return this.state.selectionBehavior()}setSelectionBehavior(e){this.state.setSelectionBehavior(e);}isFocused(){return this.state.isFocused()}setFocused(e){this.state.setFocused(e);}focusedKey(){return this.state.focusedKey()}setFocusedKey(e){(e==null||this.collection().getItem(e))&&this.state.setFocusedKey(e);}selectedKeys(){return this.state.selectedKeys()}isSelected(e){if(this.state.selectionMode()==="none")return !1;const t=this.getKey(e);return t==null?!1:this.state.selectedKeys().has(t)}isEmpty(){return this.state.selectedKeys().size===0}isSelectAll(){if(this.isEmpty())return !1;const e=this.state.selectedKeys();return this.getAllSelectableKeys().every(t=>e.has(t))}firstSelectedKey(){let e;for(const t of this.state.selectedKeys()){const o=this.collection().getItem(t),n=o?.index!=null&&e?.index!=null&&o.index<e.index;(!e||n)&&(e=o);}return e?.key}lastSelectedKey(){let e;for(const t of this.state.selectedKeys()){const o=this.collection().getItem(t),n=o?.index!=null&&e?.index!=null&&o.index>e.index;(!e||n)&&(e=o);}return e?.key}extendSelection(e){if(this.selectionMode()==="none")return;if(this.selectionMode()==="single"){this.replaceSelection(e);return}const t=this.getKey(e);if(t==null)return;const o=this.state.selectedKeys(),n=o.anchorKey||t,r=new $(o,n,t);for(const s of this.getKeyRange(n,o.currentKey||t))r.delete(s);for(const s of this.getKeyRange(t,n))this.canSelectItem(s)&&r.add(s);this.state.setSelectedKeys(r);}getKeyRange(e,t){const o=this.collection().getItem(e),n=this.collection().getItem(t);return o&&n?o.index!=null&&n.index!=null&&o.index<=n.index?this.getKeyRangeInternal(e,t):this.getKeyRangeInternal(t,e):[]}getKeyRangeInternal(e,t){const o=[];let n=e;for(;n!=null;){const r=this.collection().getItem(n);if(r&&r.type==="item"&&o.push(n),n===t)return o;n=this.collection().getKeyAfter(n);}return []}getKey(e){const t=this.collection().getItem(e);return t?!t||t.type!=="item"?null:t.key:e}toggleSelection(e){if(this.selectionMode()==="none")return;if(this.selectionMode()==="single"&&!this.isSelected(e)){this.replaceSelection(e);return}const t=this.getKey(e);if(t==null)return;const o=new $(this.state.selectedKeys());o.has(t)?o.delete(t):this.canSelectItem(t)&&(o.add(t),o.anchorKey=t,o.currentKey=t),!(this.disallowEmptySelection()&&o.size===0)&&this.state.setSelectedKeys(o);}replaceSelection(e){if(this.selectionMode()==="none")return;const t=this.getKey(e);if(t==null)return;const o=this.canSelectItem(t)?new $([t],t,t):new $;this.state.setSelectedKeys(o);}setSelectedKeys(e){if(this.selectionMode()==="none")return;const t=new $;for(const o of e){const n=this.getKey(o);if(n!=null&&(t.add(n),this.selectionMode()==="single"))break}this.state.setSelectedKeys(t);}selectAll(){this.selectionMode()==="multiple"&&this.state.setSelectedKeys(new Set(this.getAllSelectableKeys()));}clearSelection(){const e=this.state.selectedKeys();!this.disallowEmptySelection()&&e.size>0&&this.state.setSelectedKeys(new $);}toggleSelectAll(){this.isSelectAll()?this.clearSelection():this.selectAll();}select(e,t){this.selectionMode()!=="none"&&(this.selectionMode()==="single"?this.isSelected(e)&&!this.disallowEmptySelection()?this.toggleSelection(e):this.replaceSelection(e):this.selectionBehavior()==="toggle"||t&&t.pointerType==="touch"?this.toggleSelection(e):this.replaceSelection(e));}isSelectionEqual(e){if(e===this.state.selectedKeys())return !0;const t=this.selectedKeys();if(e.size!==t.size)return !1;for(const o of e)if(!t.has(o))return !1;for(const o of t)if(!e.has(o))return !1;return !0}canSelectItem(e){if(this.state.selectionMode()==="none")return !1;const t=this.collection().getItem(e);return t!=null&&!t.disabled}isDisabled(e){const t=this.collection().getItem(e);return !t||t.disabled}getAllSelectableKeys(){const e=[];return (o=>{for(;o!=null;){if(this.canSelectItem(o)){const n=this.collection().getItem(o);if(!n)continue;n.type==="item"&&e.push(o);}o=this.collection().getKeyAfter(o);}})(this.collection().getFirstKey()),e}},Pe=class{keyMap=new Map;iterable;firstKey;lastKey;constructor(e){this.iterable=e;for(const n of e)this.keyMap.set(n.key,n);if(this.keyMap.size===0)return;let t,o=0;for(const[n,r]of this.keyMap)t?(t.nextKey=n,r.prevKey=t.key):(this.firstKey=n,r.prevKey=void 0),r.type==="item"&&(r.index=o++),t=r,t.nextKey=void 0;this.lastKey=t.key;}*[Symbol.iterator](){yield*this.iterable;}getSize(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}getKeyBefore(e){return this.keyMap.get(e)?.prevKey}getKeyAfter(e){return this.keyMap.get(e)?.nextKey}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(e){return this.keyMap.get(e)}at(e){const t=[...this.getKeys()];return this.getItem(t[e])}};function Kn(e){const t=hn(e),n=dn({dataSource:()=>access(e.dataSource),getKey:()=>access(e.getKey),getTextValue:()=>access(e.getTextValue),getDisabled:()=>access(e.getDisabled),getSectionChildren:()=>access(e.getSectionChildren),factory:s=>e.filter?new Pe(e.filter(s)):new Pe(s)},[()=>e.filter]),r=new bn(n,t);return createComputed(()=>{const s=t.focusedKey();s!=null&&!n().getItem(s)&&t.setFocusedKey(void 0);}),{collection:n,selectionManager:()=>r}}var wn=class{collection;ref;collator;constructor(e,t,o){this.collection=e,this.ref=t,this.collator=o;}getKeyBelow(e){let t=this.collection().getKeyAfter(e);for(;t!=null;){const o=this.collection().getItem(t);if(o&&o.type==="item"&&!o.disabled)return t;t=this.collection().getKeyAfter(t);}}getKeyAbove(e){let t=this.collection().getKeyBefore(e);for(;t!=null;){const o=this.collection().getItem(t);if(o&&o.type==="item"&&!o.disabled)return t;t=this.collection().getKeyBefore(t);}}getFirstKey(){let e=this.collection().getFirstKey();for(;e!=null;){const t=this.collection().getItem(e);if(t&&t.type==="item"&&!t.disabled)return e;e=this.collection().getKeyAfter(e);}}getLastKey(){let e=this.collection().getLastKey();for(;e!=null;){const t=this.collection().getItem(e);if(t&&t.type==="item"&&!t.disabled)return e;e=this.collection().getKeyBefore(e);}}getItem(e){return this.ref?.()?.querySelector(`[data-key="${e}"]`)??null}getKeyPageAbove(e){const t=this.ref?.();let o=this.getItem(e);if(!t||!o)return;const n=Math.max(0,o.offsetTop+o.offsetHeight-t.offsetHeight);let r=e;for(;r&&o&&o.offsetTop>n;)r=this.getKeyAbove(r),o=r!=null?this.getItem(r):null;return r}getKeyPageBelow(e){const t=this.ref?.();let o=this.getItem(e);if(!t||!o)return;const n=Math.min(t.scrollHeight,o.offsetTop-o.offsetHeight+t.offsetHeight);let r=e;for(;r&&o&&o.offsetTop<n;)r=this.getKeyBelow(r),o=r!=null?this.getItem(r):null;return r}getKeyForSearch(e,t){const o=this.collator?.();if(!o)return;let n=t!=null?this.getKeyBelow(t):this.getFirstKey();for(;n!=null;){const r=this.collection().getItem(n);if(r){const s=r.textValue.slice(0,e.length);if(r.textValue&&o.compare(s,e)===0)return n}n=this.getKeyBelow(n);}}};function Sn(e,t,o){const n=wn$1({usage:"search",sensitivity:"base"}),r=createMemo(()=>{const s=access(e.keyboardDelegate);return s||new wn(e.collection,t,n)});return vn({selectionManager:()=>access(e.selectionManager),keyboardDelegate:r,autoFocus:()=>access(e.autoFocus),deferAutoFocus:()=>access(e.deferAutoFocus),shouldFocusWrap:()=>access(e.shouldFocusWrap),disallowEmptySelection:()=>access(e.disallowEmptySelection),selectOnFocus:()=>access(e.selectOnFocus),disallowTypeAhead:()=>access(e.disallowTypeAhead),shouldUseVirtualFocus:()=>access(e.shouldUseVirtualFocus),allowsTabNavigation:()=>access(e.allowsTabNavigation),isVirtualized:()=>access(e.isVirtualized),scrollToKey:s=>access(e.scrollToKey)?.(s),orientation:()=>access(e.orientation)},t)}function Mn(e={}){const[t,o]=It({value:()=>access(e.isSelected),defaultValue:()=>!!access(e.defaultIsSelected),onChange:s=>e.onSelectedChange?.(s)});return {isSelected:t,setIsSelected:s=>{!access(e.isReadOnly)&&!access(e.isDisabled)&&o(s);},toggle:()=>{!access(e.isReadOnly)&&!access(e.isDisabled)&&o(!t());}}}var Ue=createContext();function $e(){return useContext(Ue)}function H(){const e=$e();if(e===void 0)throw new Error("[kobalte]: `useMenuContext` must be used within a `Menu` component");return e}var Ne=createContext();function he(){const e=useContext(Ne);if(e===void 0)throw new Error("[kobalte]: `useMenuItemContext` must be used within a `Menu.Item` component");return e}var Ge=createContext();function G(){const e=useContext(Ge);if(e===void 0)throw new Error("[kobalte]: `useMenuRootContext` must be used within a `MenuRoot` component");return e}function pe(e){let t;const o=G(),n=H(),r=vt({id:o.generateId(`item-${createUniqueId()}`)},e),[s,d]=splitProps(r,["ref","textValue","disabled","closeOnSelect","checked","indeterminate","onSelect","onPointerMove","onPointerLeave","onPointerDown","onPointerUp","onClick","onKeyDown","onMouseDown","onFocus"]),[g,i]=createSignal(),[p,h]=createSignal(),[K,M]=createSignal(),w=()=>n.listState().selectionManager(),x=()=>d.id,I=()=>w().focusedKey()===x(),f=()=>{s.onSelect?.(),s.closeOnSelect&&setTimeout(()=>{n.close(!0);});};un({getItem:()=>({ref:()=>t,type:"item",key:x(),textValue:s.textValue??K()?.textContent??t?.textContent??"",disabled:s.disabled??!1})});const u=ze({key:x,selectionManager:w,shouldSelectOnPressUp:!0,allowsDifferentPressOrigin:!0,disabled:()=>s.disabled},()=>t),c=S=>{tt(S,s.onPointerMove),S.pointerType==="mouse"&&(s.disabled?n.onItemLeave(S):(n.onItemEnter(S),S.defaultPrevented||(P(S.currentTarget),n.listState().selectionManager().setFocused(!0),n.listState().selectionManager().setFocusedKey(x()))));},l=S=>{tt(S,s.onPointerLeave),S.pointerType==="mouse"&&n.onItemLeave(S);},v=S=>{tt(S,s.onPointerUp),!s.disabled&&S.button===0&&f();},y=S=>{if(tt(S,s.onKeyDown),!S.repeat&&!s.disabled)switch(S.key){case"Enter":case" ":f();break}},D=createMemo(()=>{if(s.indeterminate)return "mixed";if(s.checked!=null)return s.checked}),C=createMemo(()=>({"data-indeterminate":s.indeterminate?"":void 0,"data-checked":s.checked&&!s.indeterminate?"":void 0,"data-disabled":s.disabled?"":void 0,"data-highlighted":I()?"":void 0})),m={isChecked:()=>s.checked,dataset:C,setLabelRef:M,generateId:un$1(()=>d.id),registerLabel:Ln(i),registerDescription:Ln(h)};return createComponent(Ne.Provider,{value:m,get children(){return createComponent(Ie$1,mergeProps({as:"div",get tabIndex(){return u.tabIndex()},get"aria-checked"(){return D()},get"aria-disabled"(){return s.disabled},get"aria-labelledby"(){return g()},get"aria-describedby"(){return p()},get"data-key"(){return u.dataKey()},get onPointerDown(){return re([s.onPointerDown,u.onPointerDown])},get onPointerUp(){return re([v,u.onPointerUp])},get onClick(){return re([s.onClick,u.onClick])},get onKeyDown(){return re([y,u.onKeyDown])},get onMouseDown(){return re([s.onMouseDown,u.onMouseDown])},get onFocus(){return re([s.onFocus,u.onFocus])},onPointerMove:c,onPointerLeave:l},C,d))}})}function Wn(e){const t=vt({closeOnSelect:!1},e),[o,n]=splitProps(t,["checked","defaultChecked","onChange","onSelect"]),r=Mn({isSelected:()=>o.checked,defaultIsSelected:()=>o.defaultChecked,onSelectedChange:d=>o.onChange?.(d),isDisabled:()=>n.disabled});return createComponent(pe,mergeProps({role:"menuitemcheckbox",get checked(){return r.isSelected()},onSelect:()=>{o.onSelect?.(),r.toggle();}},n))}var xn=createContext();function ne(){return useContext(xn)}function Yn(){const e=ne();if(e===void 0)throw new Error("[kobalte]: `useMenubarContext` must be used within a `Menubar` component");return e}var te={next:(e,t)=>e==="ltr"?t==="horizontal"?"ArrowRight":"ArrowDown":t==="horizontal"?"ArrowLeft":"ArrowUp",previous:(e,t)=>te.next(e==="ltr"?"rtl":"ltr",t)},Ce={first:e=>e==="horizontal"?"ArrowDown":"ArrowRight",last:e=>e==="horizontal"?"ArrowUp":"ArrowLeft"};function Xn(e){const t=G(),o=H(),n=ne(),{direction:r}=Dt(),s=vt({id:t.generateId("trigger")},e),[d,g]=splitProps(s,["ref","id","disabled","onPointerDown","onClick","onKeyDown","onMouseOver","onFocus"]);let i=()=>t.value();n!==void 0&&(i=()=>t.value()??d.id,n.lastValue()===void 0&&n.setLastValue(i));const p=gt(()=>o.triggerRef(),()=>"button"),h=createMemo(()=>p()==="a"&&o.triggerRef()?.getAttribute("href")!=null);createEffect(on$1(()=>n?.value(),u=>{h()&&u===i()&&o.triggerRef()?.focus();}));const K=()=>{n!==void 0?o.isOpen()?n.value()===i()&&n.closeMenu():(n.autoFocusMenu()||n.setAutoFocusMenu(!0),o.open(!1)):o.toggle(!0);},M=u=>{tt(u,d.onPointerDown),u.currentTarget.dataset.pointerType=u.pointerType,!d.disabled&&u.pointerType!=="touch"&&u.button===0&&K();},w=u=>{tt(u,d.onClick),d.disabled||u.currentTarget.dataset.pointerType==="touch"&&K();},x=u=>{if(tt(u,d.onKeyDown),!d.disabled){if(h())switch(u.key){case"Enter":case" ":return}switch(u.key){case"Enter":case" ":case Ce.first(t.orientation()):u.stopPropagation(),u.preventDefault(),bn$1(u.currentTarget),o.open("first"),n?.setAutoFocusMenu(!0),n?.setValue(i);break;case Ce.last(t.orientation()):u.stopPropagation(),u.preventDefault(),o.open("last");break;case te.next(r(),t.orientation()):if(n===void 0)break;u.stopPropagation(),u.preventDefault(),n.nextMenu();break;case te.previous(r(),t.orientation()):if(n===void 0)break;u.stopPropagation(),u.preventDefault(),n.previousMenu();break}}},I=u=>{tt(u,d.onMouseOver),o.triggerRef()?.dataset.pointerType!=="touch"&&!d.disabled&&n!==void 0&&n.value()!==void 0&&n.setValue(i);},f=u=>{tt(u,d.onFocus),n!==void 0&&u.currentTarget.dataset.pointerType!=="touch"&&n.setValue(i);};return createEffect(()=>onCleanup(o.registerTriggerId(d.id))),createComponent(ke,mergeProps({get"data-kb-menu-value-trigger"(){return t.value()},get id(){return d.id},get disabled(){return d.disabled},"aria-haspopup":"true",get"aria-expanded"(){return o.isOpen()},get"aria-controls"(){return o.isOpen()?o.contentId():void 0},get"data-highlighted"(){return i()!==void 0&&n?.value()===i()?!0:void 0},get tabIndex(){return n!==void 0?n.value()===i()||n.lastValue()===i()?0:-1:void 0},onPointerDown:M,onMouseOver:I,onClick:w,onKeyDown:x,onFocus:f,role:n!==void 0?"menuitem":void 0},()=>o.dataset(),g))}var Pn=createContext();function _e(){return useContext(Pn)}function He(e){let t;const o=G(),n=H(),r=ne(),s=_e(),{direction:d}=Dt(),g=vt({id:o.generateId(`content-${createUniqueId()}`)},e),[i,p]=splitProps(g,["ref","id","style","onOpenAutoFocus","onCloseAutoFocus","onEscapeKeyDown","onFocusOutside","onPointerEnter","onPointerMove","onKeyDown","onMouseDown","onFocusIn","onFocusOut"]);let h=0;const K=()=>n.parentMenuContext()==null&&r===void 0&&o.isModal(),M=Sn({selectionManager:n.listState().selectionManager,collection:n.listState().collection,autoFocus:n.autoFocus,deferAutoFocus:!0,shouldFocusWrap:!0,disallowTypeAhead:()=>!n.listState().selectionManager().isFocused(),orientation:()=>o.orientation()==="horizontal"?"vertical":"horizontal"},()=>t);Tn$1({trapFocus:()=>K()&&n.isOpen(),onMountAutoFocus:l=>{r===void 0&&i.onOpenAutoFocus?.(l);},onUnmountAutoFocus:i.onCloseAutoFocus},()=>t);const w=l=>{if(x(l.currentTarget,l.target)&&(l.key==="Tab"&&n.isOpen()&&l.preventDefault(),r!==void 0&&l.currentTarget.getAttribute("aria-haspopup")!=="true"))switch(l.key){case te.next(d(),o.orientation()):l.stopPropagation(),l.preventDefault(),n.close(!0),r.setAutoFocusMenu(!0),r.nextMenu();break;case te.previous(d(),o.orientation()):if(l.currentTarget.hasAttribute("data-closed"))break;l.stopPropagation(),l.preventDefault(),n.close(!0),r.setAutoFocusMenu(!0),r.previousMenu();break}},x$1=l=>{i.onEscapeKeyDown?.(l),r?.setAutoFocusMenu(!1),n.close(!0);},I=l=>{i.onFocusOutside?.(l),o.isModal()&&l.preventDefault();},f=l=>{tt(l,i.onPointerEnter),n.isOpen()&&(n.parentMenuContext()?.listState().selectionManager().setFocused(!1),n.parentMenuContext()?.listState().selectionManager().setFocusedKey(void 0));},u=l=>{if(tt(l,i.onPointerMove),l.pointerType!=="mouse")return;const v=l.target,y=h!==l.clientX;x(l.currentTarget,v)&&y&&(n.setPointerDir(l.clientX>h?"right":"left"),h=l.clientX);};createEffect(()=>onCleanup(n.registerContentId(i.id))),onCleanup(()=>n.setContentRef(void 0));const c={ref:mergeRefs(l=>{n.setContentRef(l),t=l;},i.ref),role:"menu",get id(){return i.id},get tabIndex(){return M.tabIndex()},get"aria-labelledby"(){return n.triggerId()},onKeyDown:re([i.onKeyDown,M.onKeyDown,w]),onMouseDown:re([i.onMouseDown,M.onMouseDown]),onFocusIn:re([i.onFocusIn,M.onFocusIn]),onFocusOut:re([i.onFocusOut,M.onFocusOut]),onPointerEnter:f,onPointerMove:u,get"data-orientation"(){return o.orientation()}};return createComponent(Show,{get when(){return n.contentPresent()},get children(){return createComponent(Show,{get when(){return s===void 0||n.parentMenuContext()!=null},get fallback(){return createComponent(Ie$1,mergeProps({as:"div"},()=>n.dataset(),c,p))},get children(){return createComponent(Te.Positioner,{get children(){return createComponent(An$1,mergeProps({get disableOutsidePointerEvents(){return K()&&n.isOpen()},get excludedElements(){return [n.triggerRef]},bypassTopMostLayerCheck:!0,get style(){return combineStyle({"--kb-menu-content-transform-origin":"var(--kb-popper-content-transform-origin)",position:"relative"},i.style)},onEscapeKeyDown:x$1,onFocusOutside:I,get onDismiss(){return n.close}},()=>n.dataset(),c,p))}})}})}})}function qn(e){const t=G(),o=H(),[n,r]=splitProps(e,["ref"]);return On$1({element:()=>null,enabled:()=>o.contentPresent()&&t.preventScroll()}),createComponent(He,r)}var We=createContext();function Cn(){const e=useContext(We);if(e===void 0)throw new Error("[kobalte]: `useMenuGroupContext` must be used within a `Menu.Group` component");return e}function In(e){const t=G(),o=vt({id:t.generateId(`group-${createUniqueId()}`)},e),[n,r]=createSignal(),s={generateId:un$1(()=>o.id),registerLabelId:Ln(r)};return createComponent(We.Provider,{value:s,get children(){return createComponent(Ie$1,mergeProps({as:"div",role:"group",get"aria-labelledby"(){return n()}},o))}})}function jn(e){const t=Cn(),o=vt({id:t.generateId("label")},e),[n,r]=splitProps(o,["id"]);return createEffect(()=>onCleanup(t.registerLabelId(n.id))),createComponent(Ie$1,mergeProps({as:"span",get id(){return n.id},"aria-hidden":"true"},r))}function Zn(e){const t=H(),o=vt({children:"▼"},e);return createComponent(Ie$1,mergeProps({as:"span","aria-hidden":"true"},()=>t.dataset(),o))}function Jn(e){return createComponent(pe,mergeProps({role:"menuitem",closeOnSelect:!0},e))}function Qn(e){const t=he(),o=vt({id:t.generateId("description")},e),[n,r]=splitProps(o,["id"]);return createEffect(()=>onCleanup(t.registerDescription(n.id))),createComponent(Ie$1,mergeProps({as:"div",get id(){return n.id}},()=>t.dataset(),r))}function eo(e){const t=he(),o=vt({id:t.generateId("indicator")},e),[n,r]=splitProps(o,["forceMount"]);return createComponent(Show,{get when(){return n.forceMount||t.isChecked()},get children(){return createComponent(Ie$1,mergeProps({as:"div"},()=>t.dataset(),r))}})}function to(e){const t=he(),o=vt({id:t.generateId("label")},e),[n,r]=splitProps(o,["ref","id"]);return createEffect(()=>onCleanup(t.registerLabel(n.id))),createComponent(Ie$1,mergeProps({as:"div",get id(){return n.id}},()=>t.dataset(),r))}function no(e){const t=H();return createComponent(Show,{get when(){return t.contentPresent()},get children(){return createComponent(Portal,e)}})}var Ye=createContext();function Dn(){const e=useContext(Ye);if(e===void 0)throw new Error("[kobalte]: `useMenuRadioGroupContext` must be used within a `Menu.RadioGroup` component");return e}function oo(e){const o=G().generateId(`radiogroup-${createUniqueId()}`),n=vt({id:o},e),[r,s]=splitProps(n,["value","defaultValue","onChange","disabled"]),[d,g]=Re$1({value:()=>r.value,defaultValue:()=>r.defaultValue,onChange:p=>r.onChange?.(p)}),i={isDisabled:()=>r.disabled,isSelectedValue:p=>p===d(),setSelectedValue:g};return createComponent(Ye.Provider,{value:i,get children(){return createComponent(In,s)}})}function ro(e){const t=Dn(),o=vt({closeOnSelect:!1},e),[n,r]=splitProps(o,["value","onSelect"]);return createComponent(pe,mergeProps({role:"menuitemradio",get checked(){return t.isSelectedValue(n.value)},onSelect:()=>{n.onSelect?.(),t.setSelectedValue(n.value);}},r))}function Fn(e,t,o){const n=e.split("-")[0],r=o.getBoundingClientRect(),s=[],d=t.clientX,g=t.clientY;switch(n){case"top":s.push([d,g+5]),s.push([r.left,r.bottom]),s.push([r.left,r.top]),s.push([r.right,r.top]),s.push([r.right,r.bottom]);break;case"right":s.push([d-5,g]),s.push([r.left,r.top]),s.push([r.right,r.top]),s.push([r.right,r.bottom]),s.push([r.left,r.bottom]);break;case"bottom":s.push([d,g-5]),s.push([r.right,r.top]),s.push([r.right,r.bottom]),s.push([r.left,r.bottom]),s.push([r.left,r.top]);break;case"left":s.push([d+5,g]),s.push([r.right,r.bottom]),s.push([r.left,r.bottom]),s.push([r.left,r.top]),s.push([r.right,r.top]);break}return s}function kn(e,t){return t?hn$1([e.clientX,e.clientY],t):!1}function Xe(e){const t=G(),o=Ae(),n=$e(),r=ne(),s=_e(),d=vt({placement:t.orientation()==="horizontal"?"bottom-start":"right-start"},e),[g,i]=splitProps(d,["open","defaultOpen","onOpenChange"]);let p=0,h=null,K="right";const[M,w]=createSignal(),[x,I]=createSignal(),[f,u]=createSignal(),[c,l]=createSignal(),[v,y]=createSignal(!0),[D,C]=createSignal(i.placement),[m,S]=createSignal([]),[W,je]=createSignal([]),{DomCollectionProvider:Ze}=an({items:W,onItemsChange:je}),U=Pn$1({open:()=>g.open,defaultOpen:()=>g.defaultOpen,onOpenChange:P=>g.onOpenChange?.(P)}),{present:Je}=xn$1({show:()=>t.forceMount()||U.isOpen(),element:()=>c()??null}),ie=Kn({selectionMode:"none",dataSource:W}),ye=P=>{y(P),U.open();},me=(P=!1)=>{U.close(),P&&n&&n.close(!0);},Qe=P=>{y(P),U.toggle();},ve=()=>{const P$1=c();P$1&&(P(P$1),ie.selectionManager().setFocused(!0),ie.selectionManager().setFocusedKey(void 0));},be=()=>{s!=null?setTimeout(()=>ve()):ve();},et=P=>{S(ce=>[...ce,P]);const oe$1=n?.registerNestedMenu(P);return ()=>{S(ce=>oe(ce,P)),oe$1?.();}},le=P=>K===h?.side&&kn(P,h?.area),tt=P=>{le(P)&&P.preventDefault();},nt=P=>{le(P)||be();},ot=P=>{le(P)&&P.preventDefault();};Nn({isDisabled:()=>!(n==null&&U.isOpen()&&t.isModal()),targets:()=>[c(),...m()].filter(Boolean)}),createEffect(()=>{const P=c();if(!P||!n)return;const oe=n.registerNestedMenu(P);onCleanup(()=>{oe();});}),createEffect(()=>{n===void 0&&r?.registerMenu(t.value(),[c(),...m()]);}),createEffect(()=>{n!==void 0||r===void 0||(r.value()===t.value()?(f()?.focus(),r.autoFocusMenu()&&ye(!0)):me());}),createEffect(()=>{n!==void 0||r===void 0||U.isOpen()&&r.setValue(t.value());}),onCleanup(()=>{n===void 0&&r?.unregisterMenu(t.value());});const rt={dataset:createMemo(()=>({"data-expanded":U.isOpen()?"":void 0,"data-closed":U.isOpen()?void 0:""})),isOpen:U.isOpen,contentPresent:Je,nestedMenus:m,currentPlacement:D,pointerGraceTimeoutId:()=>p,autoFocus:v,listState:()=>ie,parentMenuContext:()=>n,triggerRef:f,contentRef:c,triggerId:M,contentId:x,setTriggerRef:u,setContentRef:l,open:ye,close:me,toggle:Qe,focusContent:be,onItemEnter:tt,onItemLeave:nt,onTriggerLeave:ot,setPointerDir:P=>K=P,setPointerGraceTimeoutId:P=>p=P,setPointerGraceIntent:P=>h=P,registerNestedMenu:et,registerItemToParentDomCollection:o?.registerItem,registerTriggerId:Ln(w),registerContentId:Ln(I)};return createComponent(Ze,{get children(){return createComponent(Ue.Provider,{value:rt,get children(){return createComponent(Show,{when:s===void 0,get fallback(){return i.children},get children(){return createComponent(Te,mergeProps({anchorRef:f,contentRef:c,onCurrentPlacementChange:C},i))}})}})}})}function so(e){const{direction:t}=Dt();return createComponent(Xe,mergeProps({get placement(){return t()==="rtl"?"left-start":"right-start"},flip:!0},e))}var Tn={close:(e,t)=>e==="ltr"?[t==="horizontal"?"ArrowLeft":"ArrowUp"]:[t==="horizontal"?"ArrowRight":"ArrowDown"]};function io(e){const t=H(),o=G(),[n,r]=splitProps(e,["onFocusOutside","onKeyDown"]),{direction:s}=Dt();return createComponent(He,mergeProps({onOpenAutoFocus:h=>{h.preventDefault();},onCloseAutoFocus:h=>{h.preventDefault();},onFocusOutside:h=>{n.onFocusOutside?.(h);const K=h.target;x(t.triggerRef(),K)||t.close();},onKeyDown:h=>{tt(h,n.onKeyDown);const K=x(h.currentTarget,h.target),M=Tn.close(s(),o.orientation()).includes(h.key),w=t.parentMenuContext()!=null;K&&M&&w&&(t.close(),P(t.triggerRef()));}},r))}var Ie=["Enter"," "],On={open:(e,t)=>e==="ltr"?[...Ie,t==="horizontal"?"ArrowRight":"ArrowDown"]:[...Ie,t==="horizontal"?"ArrowLeft":"ArrowUp"]};function lo(e){let t;const o=G(),n=H(),r=vt({id:o.generateId(`sub-trigger-${createUniqueId()}`)},e),[s,d]=splitProps(r,["ref","id","textValue","disabled","onPointerMove","onPointerLeave","onPointerDown","onPointerUp","onClick","onKeyDown","onMouseDown","onFocus"]);let g=null;const i=()=>{isServer||(g&&window.clearTimeout(g),g=null);},{direction:p}=Dt(),h=()=>s.id,K=()=>{const l=n.parentMenuContext();if(l==null)throw new Error("[kobalte]: `Menu.SubTrigger` must be used within a `Menu.Sub` component");return l.listState().selectionManager()},M=()=>n.listState().collection(),w=()=>K().focusedKey()===h(),x=ze({key:h,selectionManager:K,shouldSelectOnPressUp:!0,allowsDifferentPressOrigin:!0,disabled:()=>s.disabled},()=>t),I=l=>{tt(l,s.onClick),!n.isOpen()&&!s.disabled&&n.open(!0);},f=l=>{if(tt(l,s.onPointerMove),l.pointerType!=="mouse")return;const v=n.parentMenuContext();if(v?.onItemEnter(l),!l.defaultPrevented){if(s.disabled){v?.onItemLeave(l);return}!n.isOpen()&&!g&&(n.parentMenuContext()?.setPointerGraceIntent(null),g=window.setTimeout(()=>{n.open(!1),i();},100)),v?.onItemEnter(l),l.defaultPrevented||(n.listState().selectionManager().isFocused()&&(n.listState().selectionManager().setFocused(!1),n.listState().selectionManager().setFocusedKey(void 0)),P(l.currentTarget),v?.listState().selectionManager().setFocused(!0),v?.listState().selectionManager().setFocusedKey(h()));}},u=l=>{if(tt(l,s.onPointerLeave),l.pointerType!=="mouse")return;i();const v=n.parentMenuContext(),y=n.contentRef();if(y){v?.setPointerGraceIntent({area:Fn(n.currentPlacement(),l,y),side:n.currentPlacement().split("-")[0]}),window.clearTimeout(v?.pointerGraceTimeoutId());const D=window.setTimeout(()=>{v?.setPointerGraceIntent(null);},300);v?.setPointerGraceTimeoutId(D);}else {if(v?.onTriggerLeave(l),l.defaultPrevented)return;v?.setPointerGraceIntent(null);}v?.onItemLeave(l);},c=l=>{tt(l,s.onKeyDown),!l.repeat&&(s.disabled||On.open(p(),o.orientation()).includes(l.key)&&(l.stopPropagation(),l.preventDefault(),K().setFocused(!1),K().setFocusedKey(void 0),n.isOpen()||n.open("first"),n.focusContent(),n.listState().selectionManager().setFocused(!0),n.listState().selectionManager().setFocusedKey(M().getFirstKey())));};return createEffect(()=>{if(n.registerItemToParentDomCollection==null)throw new Error("[kobalte]: `Menu.SubTrigger` must be used within a `Menu.Sub` component");const l=n.registerItemToParentDomCollection({ref:()=>t,type:"item",key:h(),textValue:s.textValue??t?.textContent??"",disabled:s.disabled??!1});onCleanup(l);}),createEffect(on$1(()=>n.parentMenuContext()?.pointerGraceTimeoutId(),l=>{onCleanup(()=>{window.clearTimeout(l),n.parentMenuContext()?.setPointerGraceIntent(null);});})),createEffect(()=>onCleanup(n.registerTriggerId(s.id))),onCleanup(()=>{i();}),createComponent(Ie$1,mergeProps({as:"div",get id(){return s.id},role:"menuitem",get tabIndex(){return x.tabIndex()},"aria-haspopup":"true",get"aria-expanded"(){return n.isOpen()},get"aria-controls"(){return n.isOpen()?n.contentId():void 0},get"aria-disabled"(){return s.disabled},get"data-key"(){return x.dataKey()},get"data-highlighted"(){return w()?"":void 0},get"data-disabled"(){return s.disabled?"":void 0},get onPointerDown(){return re([s.onPointerDown,x.onPointerDown])},get onPointerUp(){return re([s.onPointerUp,x.onPointerUp])},get onClick(){return re([I,x.onClick])},get onKeyDown(){return re([c,x.onKeyDown])},get onMouseDown(){return re([s.onMouseDown,x.onMouseDown])},get onFocus(){return re([s.onFocus,x.onFocus])},onPointerMove:f,onPointerLeave:u},()=>n.dataset(),d))}function co(e){const t=ne(),o=`menu-${createUniqueId()}`,n=vt({id:o,modal:!0},e),[r,s]=splitProps(n,["id","modal","preventScroll","forceMount","open","defaultOpen","onOpenChange","value","orientation"]),d=Pn$1({open:()=>r.open,defaultOpen:()=>r.defaultOpen,onOpenChange:i=>r.onOpenChange?.(i)}),g={isModal:()=>r.modal??!0,preventScroll:()=>r.preventScroll??g.isModal(),forceMount:()=>r.forceMount??!1,generateId:un$1(()=>r.id),value:()=>r.value,orientation:()=>r.orientation??t?.orientation()??"horizontal"};return createComponent(Ge.Provider,{value:g,get children(){return createComponent(Xe,mergeProps({get open(){return d.isOpen()},get onOpenChange(){return d.setIsOpen}},s))}})}var An={};bt(An,{Root:()=>qe,Separator:()=>En});function qe(e){let t;const o=vt({orientation:"horizontal"},e),[n,r]=splitProps(o,["ref","orientation"]),s=gt(()=>t,()=>"hr");return createComponent(Ie$1,mergeProps({as:"hr",get role(){return s()!=="hr"?"separator":void 0},get"aria-orientation"(){return n.orientation==="vertical"?"vertical":void 0},get"data-orientation"(){return n.orientation}},r))}var En=qe;

export { $e as $, G, H, In as I, Jn as J, Qn as Q, Wn as W, Xt as X, Yn as Y, Zn as Z, _t as _, Xn as a, qn as b, co as c, Ht as d, eo as e, Hn as f, _n as g, io as i, jn as j, lo as l, no as n, oo as o, qe as q, ro as r, so as s, to as t, xn as x };
//# sourceMappingURL=T4C3DMHT.mjs.map
